<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="北海虽赊，扶摇可接" href="https://metal-heart.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="北海虽赊，扶摇可接" href="https://metal-heart.github.io/atom.xml"><link rel="alternate" type="application/json" title="北海虽赊，扶摇可接" href="https://metal-heart.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="Git"><link rel="canonical" href="https://metal-heart.github.io/posts/5c24f267/"><title>Git 帮助手册 - Git - 工具 | Metalheart = 北海虽赊，扶摇可接 = 「 勇敢者是到处有路可走的 」</title><meta name="generator" content="Hexo 5.4.2"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">Git 帮助手册</h1><div class="meta"><span class="item" title="创建时间：2021-04-16 18:19:18"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2021-04-16T18:19:18+08:00">2021-04-16</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>19k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>17 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Metalheart</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://s1.ax1x.com/2023/01/09//pSZvMIf.jpg"></li><li class="item" data-background-image="https://s1.ax1x.com/2023/01/09//pSZv5WD.png"></li><li class="item" data-background-image="https://s1.ax1x.com/2023/01/09//pSZvKdP.jpg"></li><li class="item" data-background-image="https://s1.ax1x.com/2023/01/09//pSZvWo6.jpg"></li><li class="item" data-background-image="https://s1.ax1x.com/2023/01/09//pSZvuZt.jpg"></li><li class="item" data-background-image="https://s1.ax1x.com/2023/01/09//pSZv4JO.png"></li></ul></div><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div></header><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/Tool/" itemprop="item" rel="index" title="分类于 工具"><span itemprop="name">工具</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/Tool/Git/" itemprop="item" rel="index" title="分类于 Git"><span itemprop="name">Git</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://metal-heart.github.io/posts/5c24f267/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="Metal-Heart"><meta itemprop="description" content="「 勇敢者是到处有路可走的 」, 老实是人生绝妙的法宝。虽然对人老实，你可能付出一定的代价，但日后你得到的，远比付出的多得多。"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="北海虽赊，扶摇可接"></span><div class="body md" itemprop="articleBody"><h1 id="git-帮助手册"><a class="anchor" href="#git-帮助手册">#</a> Git 帮助手册</h1><p>国外网友制作了一张 Git Cheat Sheet，总结很精炼，各位不妨收藏一下。</p><p>本节选择性介绍 git 中比较常用的命令行场景。</p><p><img data-src="https://raw.githubusercontent.com/dunwu/images/dev/cs/web/git/git-cheat-sheet.png" alt="img"></p><h2 id="安装"><a class="anchor" href="#安装">#</a> 安装</h2><p><strong>（1）Debian/Ubuntu 环境安装</strong></p><p>如果你使用的系统是 Debian/Ubuntu ， 安装命令为：</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>$ <span class="token function">apt-get</span> <span class="token function">install</span> libcurl4-gnutls-dev libexpat1-dev gettext <span class="token punctuation">\</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token operator">></span> libz-dev libssl-dev</pre></td></tr><tr><td data-num="3"></td><td><pre>$ <span class="token function">apt-get</span> <span class="token function">install</span> git-core</pre></td></tr><tr><td data-num="4"></td><td><pre>$ <span class="token function">git</span> <span class="token parameter variable">--version</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">git</span> version <span class="token number">1.8</span>.1.2</pre></td></tr></table></figure><p><strong>（2）Centos/RedHat 环境安装</strong></p><p>如果你使用的系统是 Centos/RedHat ，安装命令为：</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>$ yum <span class="token function">install</span> curl-devel expat-devel gettext-devel <span class="token punctuation">\</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token operator">></span> openssl-devel zlib-devel</pre></td></tr><tr><td data-num="3"></td><td><pre>$ yum <span class="token parameter variable">-y</span> <span class="token function">install</span> git-core</pre></td></tr><tr><td data-num="4"></td><td><pre>$ <span class="token function">git</span> <span class="token parameter variable">--version</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">git</span> version <span class="token number">1.7</span>.1</pre></td></tr></table></figure><p><strong>（3）Windows 环境安装</strong></p><p>在<span class="exturl" data-url="aHR0cHM6Ly9naXQtc2NtLmNvbS9kb3dubG9hZHM="> Git 官方下载地址</span>下载 exe 安装包。按照安装向导安装即可。</p><p>建议安装 Git Bash 这个 git 的命令行工具。</p><p><strong>（4）Mac 环境安装</strong></p><p>在<span class="exturl" data-url="aHR0cHM6Ly9naXQtc2NtLmNvbS9kb3dubG9hZHM="> Git 官方下载地址</span>下载 mac 安装包。按照安装向导安装即可。</p><h2 id="配置"><a class="anchor" href="#配置">#</a> 配置</h2><p>Git 自带一个 <code>git config</code> 的工具来帮助设置控制 Git 外观和行为的配置变量。 这些变量存储在三个不同的位置：</p><ul><li><code>/etc/gitconfig</code> 文件：包含系统上每一个用户及他们仓库的通用配置。 如果使用带有 <code>--system</code> 选项的 <code>git config</code> 时，它会从此文件读写配置变量。</li><li><code>~/.gitconfig</code> 或 <code>~/.config/git/config</code> 文件：只针对当前用户。 可以传递 <code>--global</code> 选项让 Git 读写此文件。</li><li>当前使用仓库的 Git 目录中的 <code>config</code> 文件（就是 <code>.git/config</code> ）：针对该仓库。</li></ul><p>每一个级别覆盖上一级别的配置，所以 <code>.git/config</code> 的配置变量会覆盖 <code>/etc/gitconfig</code> 中的配置变量。</p><p>在 Windows 系统中，Git 会查找 <code>$HOME</code> 目录下（一般情况下是 <code>C:\Users\$USER</code> ）的 <code>.gitconfig</code> 文件。 Git 同样也会寻找 <code>/etc/gitconfig</code> 文件，但只限于 MSys 的根目录下，即安装 Git 时所选的目标位置。</p><h3 id="配置用户信息"><a class="anchor" href="#配置用户信息">#</a> 配置用户信息</h3><p>当安装完 Git 应该做的第一件事就是设置你的用户名称与邮件地址。 这样做很重要，因为每一个 Git 的提交都会使用这些信息，并且它会写入到你的每一次提交中，不可更改：</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> config <span class="token parameter variable">--global</span> user.name <span class="token string">"John Doe"</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">git</span> config <span class="token parameter variable">--global</span> user.email johndoe@example.com</pre></td></tr></table></figure><p>再次强调，如果使用了 <code>--global</code> 选项，那么该命令只需要运行一次，因为之后无论你在该系统上做任何事情， Git 都会使用那些信息。 当你想针对特定项目使用不同的用户名称与邮件地址时，可以在那个项目目录下运行没有 <code>--global</code> 选项的命令来配置。</p><p>很多 GUI 工具都会在第一次运行时帮助你配置这些信息。</p><h3 id="给-git-命令添加别名"><a class="anchor" href="#给-git-命令添加别名">#</a> 给 Git 命令添加别名</h3><p>在 OS X 和 Linux 下，你的 Git 的配置文件储存在 <code>~/.gitconfig</code> 。我在 <code>[alias]</code> 部分添加了一些快捷别名 (和一些我容易拼写错误的)，如下:</p><figure class="highlight vim"><figcaption data-lang="vim"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>alias<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    a <span class="token operator">=</span> add</pre></td></tr><tr><td data-num="3"></td><td><pre>    amend <span class="token operator">=</span> commit <span class="token operator">-</span><span class="token operator">-</span>amend</pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">c</span> <span class="token operator">=</span> commit</pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">ca</span> <span class="token operator">=</span> commit <span class="token operator">-</span><span class="token operator">-</span>amend</pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token builtin">ci</span> <span class="token operator">=</span> commit <span class="token operator">-</span>a</pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">co</span> <span class="token operator">=</span> checkout</pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">d</span> <span class="token operator">=</span> <span class="token builtin">diff</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    dc <span class="token operator">=</span> <span class="token builtin">diff</span> <span class="token operator">-</span><span class="token operator">-</span>changed</pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">ds</span> <span class="token operator">=</span> <span class="token builtin">diff</span> <span class="token operator">-</span><span class="token operator">-</span>staged</pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">f</span> <span class="token operator">=</span> fetch</pre></td></tr><tr><td data-num="12"></td><td><pre>    loll <span class="token operator">=</span> log <span class="token operator">-</span><span class="token operator">-</span>graph <span class="token operator">-</span><span class="token operator">-</span>decorate <span class="token operator">-</span><span class="token operator">-</span>pretty<span class="token operator">=</span>oneline <span class="token operator">-</span><span class="token operator">-</span>abbrev<span class="token operator">-</span>commit</pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">m</span> <span class="token operator">=</span> merge</pre></td></tr><tr><td data-num="14"></td><td><pre>    one <span class="token operator">=</span> log <span class="token operator">-</span><span class="token operator">-</span>pretty<span class="token operator">=</span>oneline</pre></td></tr><tr><td data-num="15"></td><td><pre>    outstanding <span class="token operator">=</span> rebase <span class="token operator">-</span>i @<span class="token punctuation">&#123;</span><span class="token keyword">u</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    s <span class="token operator">=</span> status</pre></td></tr><tr><td data-num="17"></td><td><pre>    unpushed <span class="token operator">=</span> log @<span class="token punctuation">&#123;</span><span class="token keyword">u</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token builtin">wc</span> <span class="token operator">=</span> whatchanged</pre></td></tr><tr><td data-num="19"></td><td><pre>    wip <span class="token operator">=</span> rebase <span class="token operator">-</span>i @<span class="token punctuation">&#123;</span><span class="token keyword">u</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    zap <span class="token operator">=</span> fetch <span class="token operator">-</span><span class="token keyword">p</span></pre></td></tr></table></figure><h3 id="缓存一个仓库的用户名和密码"><a class="anchor" href="#缓存一个仓库的用户名和密码">#</a> 缓存一个仓库的用户名和密码</h3><p>你可能有一个仓库需要授权，这时你可以缓存用户名和密码，而不用每次推 / 拉 (push/pull) 的时候都输入，Credential helper 能帮你。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> config <span class="token parameter variable">--global</span> credential.helper cache</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">## Set git to use the credential memory cache</span></pre></td></tr></table></figure><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> config <span class="token parameter variable">--global</span> credential.helper <span class="token string">'cache --timeout=3600'</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">## Set the cache to timeout after 1 hour (setting is in seconds)</span></pre></td></tr></table></figure><h2 id="仓库"><a class="anchor" href="#仓库">#</a> 仓库</h2><h3 id="初始化仓库"><a class="anchor" href="#初始化仓库">#</a> 初始化仓库</h3><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>$ <span class="token function">git</span> init</pre></td></tr></table></figure><h3 id="克隆仓库"><a class="anchor" href="#克隆仓库">#</a> 克隆仓库</h3><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 通过 SSH</span></pre></td></tr><tr><td data-num="2"></td><td><pre>$ <span class="token function">git</span> clone ssh://user@domain.com/repo.git</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># 通过 HTTP</span></pre></td></tr><tr><td data-num="4"></td><td><pre>$ <span class="token function">git</span> clone http://domain.com/user/repo.git</pre></td></tr></table></figure><h2 id="储藏"><a class="anchor" href="#储藏">#</a> 储藏</h2><p>有时，我们需要在同一个项目的不同分支上工作。当需要切换分支时，偏偏本地的工作还没有完成，此时，提交修改显得不严谨，但是不提交代码又无法切换分支。这时，你可以使用 <code>git stash</code> 将本地的修改内容作为草稿储藏起来。</p><p>官方称之为储藏，但我个人更喜欢称之为存草稿。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 1. 将修改作为当前分支的草稿保存</span></pre></td></tr><tr><td data-num="2"></td><td><pre>$ <span class="token function">git</span> stash</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># 2. 查看草稿列表</span></pre></td></tr><tr><td data-num="5"></td><td><pre>$ <span class="token function">git</span> stash list</pre></td></tr><tr><td data-num="6"></td><td><pre>stash@<span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span>: WIP on master: 6fae349 :memo: Writing docs.</pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment"># 3.1 删除草稿</span></pre></td></tr><tr><td data-num="9"></td><td><pre>$ <span class="token function">git</span> stash drop stash@<span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment"># 3.2 读取草稿</span></pre></td></tr><tr><td data-num="12"></td><td><pre>$ <span class="token function">git</span> stash apply stash@<span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="暂存"><a class="anchor" href="#暂存">#</a> 暂存</h2><p><code>git add</code> 命令用于将修改添加到暂存区。</p><h3 id="暂存指定文件"><a class="anchor" href="#暂存指定文件">#</a> 暂存指定文件</h3><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> <span class="token function">add</span> xxx</pre></td></tr></table></figure><h3 id="暂存当前目录下所有修改"><a class="anchor" href="#暂存当前目录下所有修改">#</a> 暂存当前目录下所有修改</h3><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span></pre></td></tr></table></figure><h3 id="暂存所有修改"><a class="anchor" href="#暂存所有修改">#</a> 暂存所有修改</h3><pre><code>git add -A
</code></pre><h3 id="暂存文件部分内容"><a class="anchor" href="#暂存文件部分内容">#</a> 暂存文件部分内容</h3><p>暂存文件部分内容</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> <span class="token function">add</span> <span class="token parameter variable">--patch</span> filename.x</pre></td></tr></table></figure><p><code>-p</code> 简写。这会打开交互模式， 你将能够用 <code>s</code> 选项来分隔提交 (commit)；</p><p>然而，如果这个文件是新的，会没有这个选择， 添加一个新文件时，这样做:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> <span class="token function">add</span> <span class="token parameter variable">-N</span> filename.x</pre></td></tr></table></figure><p>然后，你需要用 <code>e</code> 选项来手动选择需要添加的行，执行 <code>git diff --cached</code> 将会显示哪些行暂存了哪些行只是保存在本地了。</p><h3 id="把暂存的内容变成未暂存把未暂存的内容暂存起来"><a class="anchor" href="#把暂存的内容变成未暂存把未暂存的内容暂存起来">#</a> 把暂存的内容变成未暂存，把未暂存的内容暂存起来</h3><p>这个有点困难， 我能想到的最好的方法是先 stash 未暂存的内容， 然后重置 (reset)，再 pop 第一步 stashed 的内容，最后再 add 它们。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> stash <span class="token parameter variable">-k</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">git</span> reset <span class="token parameter variable">--hard</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">git</span> stash pop</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">git</span> <span class="token function">add</span> <span class="token parameter variable">-A</span></pre></td></tr></table></figure><h2 id="提交"><a class="anchor" href="#提交">#</a> 提交</h2><p><code>git commit</code> 命令用于将修改保存到到本地仓库。</p><h3 id="查看最近一次提交"><a class="anchor" href="#查看最近一次提交">#</a> 查看最近一次提交</h3><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> show</pre></td></tr></table></figure><p>或者</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> log <span class="token parameter variable">-n1</span> <span class="token parameter variable">-p</span></pre></td></tr></table></figure><h3 id="提交本地的所有修改"><a class="anchor" href="#提交本地的所有修改">#</a> 提交本地的所有修改</h3><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> commit <span class="token parameter variable">-a</span></pre></td></tr></table></figure><h3 id="提交暂存的修改"><a class="anchor" href="#提交暂存的修改">#</a> 提交暂存的修改</h3><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> commit</pre></td></tr></table></figure><h3 id="把暂存的内容添加到上一次的提交"><a class="anchor" href="#把暂存的内容添加到上一次的提交">#</a> 把暂存的内容添加到上一次的提交</h3><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> commit <span class="token parameter variable">--amend</span></pre></td></tr></table></figure><h3 id="附加消息提交"><a class="anchor" href="#附加消息提交">#</a> 附加消息提交</h3><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">'commit message'</span></pre></td></tr></table></figure><h3 id="修改提交信息"><a class="anchor" href="#修改提交信息">#</a> 修改提交信息</h3><p>如果你的提交信息写错了且这次提交（commit）还没有推送（push），可以使用以下命令修改：</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> commit <span class="token parameter variable">--amend</span></pre></td></tr></table></figure><p>或者</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> commit <span class="token parameter variable">--amend</span> <span class="token parameter variable">-m</span> <span class="token string">'xxxxxxx'</span></pre></td></tr></table></figure><h3 id="修改提交信息中的用户名和邮箱"><a class="anchor" href="#修改提交信息中的用户名和邮箱">#</a> 修改提交信息中的用户名和邮箱</h3><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> commit <span class="token parameter variable">--amend</span> <span class="token parameter variable">--author</span> <span class="token string">"New Authorname &lt;authoremail@mydomain.com>"</span></pre></td></tr></table></figure><h3 id="从提交中移除一个文件"><a class="anchor" href="#从提交中移除一个文件">#</a> 从提交中移除一个文件</h3><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> checkout HEAD^ myfile</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">git</span> <span class="token function">add</span> <span class="token parameter variable">-A</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">git</span> commit <span class="token parameter variable">--amend</span></pre></td></tr></table></figure><h3 id="删除最后一次提交"><a class="anchor" href="#删除最后一次提交">#</a> 删除最后一次提交</h3><p>如果你需要删除推了的提交 (pushed commits)，你可以使用下面的方法。可是，这会不可逆的改变你的历史，也会搞乱那些已经从该仓库拉取 (pulled) 了的人的历史。简而言之，如果你不是很确定，千万不要这么做。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> reset HEAD^ <span class="token parameter variable">--hard</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">git</span> push <span class="token parameter variable">-f</span> <span class="token punctuation">[</span>remote<span class="token punctuation">]</span> <span class="token punctuation">[</span>branch<span class="token punctuation">]</span></pre></td></tr></table></figure><p>如果你还没有推到远程，把 Git 重置 (reset) 到你最后一次提交前的状态就可以了 (同时保存暂存的变化):</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>my-branch*<span class="token punctuation">)</span>$ <span class="token function">git</span> reset <span class="token parameter variable">--soft</span> HEAD@<span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>这只能在没有推送之前有用。如果你已经推了，唯一安全能做的是 <code>git revert SHAofBadCommit</code> ， 那会创建一个新的提交 (commit) 用于撤消前一个提交的所有变化 (changes)； 或者，如果你推的这个分支是 rebase-safe 的 (例如： 其它开发者不会从这个分支拉), 只需要使用 <code>git push -f</code> ； 更多，请参考 <a href="#deleteremove-last-pushed-commit">the above section</a>。</p><h3 id="删除任意提交"><a class="anchor" href="#删除任意提交">#</a> 删除任意提交</h3><p>同样的警告：不到万不得已的时候不要这么做.</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> rebase <span class="token parameter variable">--onto</span> SHA1_OF_BAD_COMMIT^ SHA1_OF_BAD_COMMIT</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">git</span> push <span class="token parameter variable">-f</span> <span class="token punctuation">[</span>remote<span class="token punctuation">]</span> <span class="token punctuation">[</span>branch<span class="token punctuation">]</span></pre></td></tr></table></figure><p>或者做一个 <a href="#interactive-rebase">交互式 rebase</a> 删除那些你想要删除的提交 (commit) 里所对应的行。</p><h3 id="我尝试推一个修正后的提交amended-commit到远程但是报错"><a class="anchor" href="#我尝试推一个修正后的提交amended-commit到远程但是报错">#</a> 我尝试推一个修正后的提交 (amended commit) 到远程，但是报错</h3><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>To https://github.com/yourusername/repo.git</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token operator">!</span> <span class="token punctuation">[</span>rejected<span class="token punctuation">]</span>        mybranch -<span class="token operator">></span> mybranch <span class="token punctuation">(</span>non-fast-forward<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>error: failed to push some refs to <span class="token string">'https://github.com/tanay1337/webmaker.org.git'</span></pre></td></tr><tr><td data-num="4"></td><td><pre>hint: Updates were rejected because the tip of your current branch is behind</pre></td></tr><tr><td data-num="5"></td><td><pre>hint: its remote counterpart. Integrate the remote changes <span class="token punctuation">(</span>e.g.</pre></td></tr><tr><td data-num="6"></td><td><pre>hint: <span class="token string">'git pull ...'</span><span class="token punctuation">)</span> before pushing again.</pre></td></tr><tr><td data-num="7"></td><td><pre>hint: See the <span class="token string">'Note about fast-forwards'</span> <span class="token keyword">in</span> <span class="token string">'git push --help'</span> <span class="token keyword">for</span> details.</pre></td></tr></table></figure><p>注意，rebasing (见下面) 和修正 (amending) 会用一个<strong>新的提交 (commit) 代替旧的</strong>，所以如果之前你已经往远程仓库上推过一次修正前的提交 (commit)，那你现在就必须强推 (force push) ( <code>-f</code> )。 注意 – <em>总是</em> 确保你指明一个分支！</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>my-branch<span class="token punctuation">)</span>$ <span class="token function">git</span> push origin mybranch <span class="token parameter variable">-f</span></pre></td></tr></table></figure><p>一般来说，<strong>要避免强推</strong>。最好是创建和推 (push) 一个新的提交 (commit)，而不是强推一个修正后的提交。后者会使那些与该分支或该分支的子分支工作的开发者，在源历史中产生冲突。</p><h3 id="不小心强制重置想找回内容"><a class="anchor" href="#不小心强制重置想找回内容">#</a> 不小心强制重置，想找回内容</h3><p>如果你意外的做了 <code>git reset --hard</code> , 你通常能找回你的提交 (commit), 因为 Git 对每件事都会有日志，且都会保存几天。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> reflog</pre></td></tr></table></figure><p>你将会看到一个你过去提交 (commit) 的列表，和一个重置的提交。 选择你想要回到的提交 (commit) 的 SHA，再重置一次:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> reset <span class="token parameter variable">--hard</span> SHA1234</pre></td></tr></table></figure><p>这样就完成了。</p><h2 id="重置"><a class="anchor" href="#重置">#</a> 重置</h2><p>撤销本地修改：</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 移除缓存区的所有文件（i.e. 撤销上次 git add）</span></pre></td></tr><tr><td data-num="2"></td><td><pre>$ <span class="token function">git</span> reset HEAD</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># 将 HEAD 重置到上一次提交的版本，并将之后的修改标记为未添加到缓存区的修改</span></pre></td></tr><tr><td data-num="5"></td><td><pre>$ <span class="token function">git</span> reset <span class="token operator">&lt;</span>commit<span class="token operator">></span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment"># 将 HEAD 重置到上一次提交的版本，并保留未提交的本地修改</span></pre></td></tr><tr><td data-num="8"></td><td><pre>$ <span class="token function">git</span> reset <span class="token parameter variable">--keep</span> <span class="token operator">&lt;</span>commit<span class="token operator">></span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment"># 放弃工作目录下的所有修改</span></pre></td></tr><tr><td data-num="11"></td><td><pre>$ <span class="token function">git</span> reset <span class="token parameter variable">--hard</span> HEAD</pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment"># 将 HEAD 重置到指定的版本，并抛弃该版本之后的所有修改</span></pre></td></tr><tr><td data-num="14"></td><td><pre>$ <span class="token function">git</span> reset <span class="token parameter variable">--hard</span> <span class="token operator">&lt;</span>commit-hash<span class="token operator">></span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment"># 用远端分支强制覆盖本地分支</span></pre></td></tr><tr><td data-num="17"></td><td><pre>$ <span class="token function">git</span> reset <span class="token parameter variable">--hard</span> <span class="token operator">&lt;</span>remote/branch<span class="token operator">></span> e.g., upstream/master, origin/my-feature</pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment"># 放弃某个文件的所有本地修改</span></pre></td></tr><tr><td data-num="20"></td><td><pre>$ <span class="token function">git</span> checkout HEAD <span class="token operator">&lt;</span>file<span class="token operator">></span></pre></td></tr></table></figure><p>删除添加 <code>.gitignore</code> 文件前错误提交的文件：</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 提交一条 git 记录，提交信息为 remove xyz file</span></pre></td></tr><tr><td data-num="2"></td><td><pre>$ <span class="token function">git</span> <span class="token function">rm</span> <span class="token parameter variable">-r</span> <span class="token parameter variable">--cached</span> <span class="token builtin class-name">.</span></pre></td></tr><tr><td data-num="3"></td><td><pre>$ <span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span></pre></td></tr><tr><td data-num="4"></td><td><pre>$ <span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">"remove xyz file"</span></pre></td></tr></table></figure><p>撤销远程修改（创建一个新的提交，并回滚到指定版本）：</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># revert 哈希号为 commit-hash 的记录</span></pre></td></tr><tr><td data-num="2"></td><td><pre>$ <span class="token function">git</span> revert <span class="token operator">&lt;</span>commit-hash<span class="token operator">></span></pre></td></tr></table></figure><p>彻底删除指定版本：</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 执行下面命令后，commit-hash 提交后的记录都会被彻底删除，使用需谨慎</span></pre></td></tr><tr><td data-num="2"></td><td><pre>$ <span class="token function">git</span> reset <span class="token parameter variable">--hard</span> <span class="token operator">&lt;</span>commit-hash<span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre>$ <span class="token function">git</span> push <span class="token parameter variable">-f</span></pre></td></tr></table></figure><h2 id="更新"><a class="anchor" href="#更新">#</a> 更新</h2><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 下载远程端版本，但不合并到 HEAD 中</span></pre></td></tr><tr><td data-num="2"></td><td><pre>$ <span class="token function">git</span> fetch <span class="token operator">&lt;</span>remote<span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># 将远程端版本合并到本地版本中</span></pre></td></tr><tr><td data-num="5"></td><td><pre>$ <span class="token function">git</span> pull origin master</pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment"># 以 rebase 方式将远端分支与本地合并</span></pre></td></tr><tr><td data-num="8"></td><td><pre>$ <span class="token function">git</span> pull <span class="token parameter variable">--rebase</span> <span class="token operator">&lt;</span>remote<span class="token operator">></span> <span class="token operator">&lt;</span>branch<span class="token operator">></span></pre></td></tr></table></figure><h2 id="推送"><a class="anchor" href="#推送">#</a> 推送</h2><h3 id="推送提交到远程仓库"><a class="anchor" href="#推送提交到远程仓库">#</a> 推送提交到远程仓库</h3><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> push remote <span class="token operator">&lt;</span>remote<span class="token operator">></span> <span class="token operator">&lt;</span>branch<span class="token operator">></span></pre></td></tr></table></figure><h3 id="发布标签"><a class="anchor" href="#发布标签">#</a> 发布标签</h3><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> push <span class="token parameter variable">--tags</span></pre></td></tr></table></figure><h2 id="未暂存"><a class="anchor" href="#未暂存">#</a> 未暂存</h2><blockquote><p>未暂存 (Unstaged) 的内容</p></blockquote><h3 id="把未暂存的内容移动到一个新分支"><a class="anchor" href="#把未暂存的内容移动到一个新分支">#</a> 把未暂存的内容移动到一个新分支</h3><ul><li><code>git checkout -b my-branch</code></li></ul><h3 id="我想把未暂存的内容移动到另一个已存在的分支"><a class="anchor" href="#我想把未暂存的内容移动到另一个已存在的分支">#</a> 我想把未暂存的内容移动到另一个已存在的分支</h3><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> stash</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">git</span> checkout my-branch</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">git</span> stash pop</pre></td></tr></table></figure><h3 id="丢弃本地未提交的变化"><a class="anchor" href="#丢弃本地未提交的变化">#</a> 丢弃本地未提交的变化</h3><p>如果你只是想重置源 (origin) 和你本地 (local) 之间的一些提交 (commit)，你可以：</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">## one commit</span></pre></td></tr><tr><td data-num="2"></td><td><pre>$ <span class="token function">git</span> reset <span class="token parameter variable">--hard</span> HEAD^</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">## two commits</span></pre></td></tr><tr><td data-num="4"></td><td><pre>$ <span class="token function">git</span> reset <span class="token parameter variable">--hard</span> HEAD^^</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">## four commits</span></pre></td></tr><tr><td data-num="6"></td><td><pre>$ <span class="token function">git</span> reset <span class="token parameter variable">--hard</span> HEAD~4</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">## or</span></pre></td></tr><tr><td data-num="8"></td><td><pre>$ <span class="token function">git</span> checkout <span class="token parameter variable">-f</span></pre></td></tr></table></figure><p>重置某个特殊的文件，你可以用文件名做为参数:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> reset filename</pre></td></tr></table></figure><h3 id="我想丢弃某些未暂存的内容"><a class="anchor" href="#我想丢弃某些未暂存的内容">#</a> 我想丢弃某些未暂存的内容</h3><p>如果你想丢弃工作拷贝中的一部分内容，而不是全部。</p><p>签出 (checkout) 不需要的内容，保留需要的。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>$ <span class="token function">git</span> checkout <span class="token parameter variable">-p</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">## Answer y to all of the snippets you want to drop</span></pre></td></tr></table></figure><p>另外一个方法是使用 <code>stash</code> ， Stash 所有要保留下的内容，重置工作拷贝，重新应用保留的部分。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>$ <span class="token function">git</span> stash <span class="token parameter variable">-p</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">## Select all of the snippets you want to save</span></pre></td></tr><tr><td data-num="3"></td><td><pre>$ <span class="token function">git</span> reset <span class="token parameter variable">--hard</span></pre></td></tr><tr><td data-num="4"></td><td><pre>$ <span class="token function">git</span> stash pop</pre></td></tr></table></figure><p>或者，stash 你不需要的部分，然后 stash drop。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>$ <span class="token function">git</span> stash <span class="token parameter variable">-p</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">## Select all of the snippets you don't want to save</span></pre></td></tr><tr><td data-num="3"></td><td><pre>$ <span class="token function">git</span> stash drop</pre></td></tr></table></figure><h2 id="分支"><a class="anchor" href="#分支">#</a> 分支</h2><blockquote><p>分支 (Branches)</p></blockquote><h3 id="列出所有的分支"><a class="anchor" href="#列出所有的分支">#</a> 列出所有的分支</h3><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> branch</pre></td></tr></table></figure><h3 id="列出所有的远端分支"><a class="anchor" href="#列出所有的远端分支">#</a> 列出所有的远端分支</h3><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> branch <span class="token parameter variable">-r</span></pre></td></tr></table></figure><h3 id="基于当前分支创建新分支"><a class="anchor" href="#基于当前分支创建新分支">#</a> 基于当前分支创建新分支</h3><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> branch <span class="token operator">&lt;</span>new-branch<span class="token operator">></span></pre></td></tr></table></figure><h3 id="基于远程分支创建新分支"><a class="anchor" href="#基于远程分支创建新分支">#</a> 基于远程分支创建新分支</h3><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> branch <span class="token parameter variable">--track</span> <span class="token operator">&lt;</span>new-branch<span class="token operator">></span> <span class="token operator">&lt;</span>remote-branch<span class="token operator">></span></pre></td></tr></table></figure><h3 id="删除本地分支"><a class="anchor" href="#删除本地分支">#</a> 删除本地分支</h3><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> branch <span class="token parameter variable">-d</span> <span class="token operator">&lt;</span>branch<span class="token operator">></span></pre></td></tr></table></figure><h3 id="强制删除本地分支"><a class="anchor" href="#强制删除本地分支">#</a> 强制删除本地分支</h3><blockquote><p>注意：强制删除本地分支，将会丢失未合并的修改</p></blockquote><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> branch <span class="token parameter variable">-D</span> <span class="token operator">&lt;</span>branch<span class="token operator">></span></pre></td></tr></table></figure><h3 id="删除远程分支"><a class="anchor" href="#删除远程分支">#</a> 删除远程分支</h3><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> push <span class="token operator">&lt;</span>remote<span class="token operator">></span> :<span class="token operator">&lt;</span>branch<span class="token operator">></span> <span class="token punctuation">(</span>since Git v1.5.0<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">git</span> push <span class="token operator">&lt;</span>remote<span class="token operator">></span> <span class="token parameter variable">--delete</span> <span class="token operator">&lt;</span>branch<span class="token operator">></span> <span class="token punctuation">(</span>since Git v1.7.0<span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="切换分支"><a class="anchor" href="#切换分支">#</a> 切换分支</h3><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> checkout <span class="token operator">&lt;</span>branch<span class="token operator">></span></pre></td></tr></table></figure><h3 id="创建并切换到新分支"><a class="anchor" href="#创建并切换到新分支">#</a> 创建并切换到新分支</h3><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> checkout <span class="token parameter variable">-b</span> <span class="token operator">&lt;</span>branch<span class="token operator">></span></pre></td></tr></table></figure><h3 id="我从错误的分支拉取了内容或把内容拉取到了错误的分支"><a class="anchor" href="#我从错误的分支拉取了内容或把内容拉取到了错误的分支">#</a> 我从错误的分支拉取了内容，或把内容拉取到了错误的分支</h3><p>这是另外一种使用 <code>git reflog</code> 情况，找到在这次错误拉 (pull) 之前 HEAD 的指向。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> reflog</pre></td></tr><tr><td data-num="2"></td><td><pre>ab7555f HEAD@<span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span>: pull origin wrong-branch: Fast-forward</pre></td></tr><tr><td data-num="3"></td><td><pre>c5bc55a HEAD@<span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">&#125;</span>: checkout: checkout message goes here</pre></td></tr></table></figure><p>重置分支到你所需的提交 (desired commit):</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> reset <span class="token parameter variable">--hard</span> c5bc55a</pre></td></tr></table></figure><p>完成。</p><h3 id="我想扔掉本地的提交commit以便我的分支与远程的保持一致"><a class="anchor" href="#我想扔掉本地的提交commit以便我的分支与远程的保持一致">#</a> 我想扔掉本地的提交 (commit)，以便我的分支与远程的保持一致</h3><p>先确认你没有推 (push) 你的内容到远程。</p><p><code>git status</code> 会显示你领先 (ahead) 源 (origin) 多少个提交:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>my-branch<span class="token punctuation">)</span>$ <span class="token function">git</span> status</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">## On branch my-branch</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">## Your branch is ahead of 'origin/my-branch' by 2 commits.</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">##   (use "git push" to publish your local commits)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">#</span></pre></td></tr></table></figure><p>一种方法是:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> reset <span class="token parameter variable">--hard</span> origin/my-branch</pre></td></tr></table></figure><h3 id="我需要提交到一个新分支但错误的提交到了-master"><a class="anchor" href="#我需要提交到一个新分支但错误的提交到了-master">#</a> 我需要提交到一个新分支，但错误的提交到了 master</h3><p>在 master 下创建一个新分支，不切换到新分支，仍在 master 下:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> branch my-branch</pre></td></tr></table></figure><p>把 master 分支重置到前一个提交:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> reset <span class="token parameter variable">--hard</span> HEAD^</pre></td></tr></table></figure><p><code>HEAD^</code> 是 <code>HEAD^1</code> 的简写，你可以通过指定要设置的 <code>HEAD</code> 来进一步重置。</p><p>或者，如果你不想使用 <code>HEAD^</code> , 找到你想重置到的提交 (commit) 的 hash ( <code>git log</code> 能够完成)， 然后重置到这个 hash。 使用 <code>git push</code> 同步内容到远程。</p><p>例如，master 分支想重置到的提交的 hash 为 <code>a13b85e</code> :</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> reset <span class="token parameter variable">--hard</span> a13b85e</pre></td></tr><tr><td data-num="2"></td><td><pre>HEAD is now at a13b85e</pre></td></tr></table></figure><p>签出 (checkout) 刚才新建的分支继续工作:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> checkout my-branch</pre></td></tr></table></figure><h3 id="我想保留来自另外一个-ref-ish-的整个文件"><a class="anchor" href="#我想保留来自另外一个-ref-ish-的整个文件">#</a> 我想保留来自另外一个 ref-ish 的整个文件</h3><p>假设你正在做一个原型方案 (原文为 working spike (see note)), 有成百的内容，每个都工作得很好。现在，你提交到了一个分支，保存工作内容:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>solution<span class="token punctuation">)</span>$ <span class="token function">git</span> <span class="token function">add</span> <span class="token parameter variable">-A</span> <span class="token operator">&amp;&amp;</span> <span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">"Adding all changes from this spike into one big commit."</span></pre></td></tr></table></figure><p>当你想要把它放到一个分支里 (可能是 <code>feature</code> , 或者 <code>develop</code> ), 你关心是保持整个文件的完整，你想要一个大的提交分隔成比较小。</p><p>假设你有:</p><ul><li>分支 <code>solution</code> , 拥有原型方案， 领先 <code>develop</code> 分支。</li><li>分支 <code>develop</code> , 在这里你应用原型方案的一些内容。</li></ul><p>我去可以通过把内容拿到你的分支里，来解决这个问题:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>develop<span class="token punctuation">)</span>$ <span class="token function">git</span> checkout solution -- file1.txt</pre></td></tr></table></figure><p>这会把这个文件内容从分支 <code>solution</code> 拿到分支 <code>develop</code> 里来:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">## On branch develop</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">## Your branch is up-to-date with 'origin/develop'.</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">## Changes to be committed:</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">##  (use "git reset HEAD &lt;file>..." to unstage)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">#</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">##        modified:   file1.txt</span></pre></td></tr></table></figure><p>然后，正常提交。</p><p>Note: Spike solutions are made to analyze or solve the problem. These solutions are used for estimation and discarded once everyone gets clear visualization of the problem. ~ <span class="exturl" data-url="aHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRXh0cmVtZV9wcm9ncmFtbWluZ19wcmFjdGljZXM=">Wikipedia</span>.</p><h3 id="我把几个提交commit提交到了同一个分支而这些提交应该分布在不同的分支里"><a class="anchor" href="#我把几个提交commit提交到了同一个分支而这些提交应该分布在不同的分支里">#</a> 我把几个提交 (commit) 提交到了同一个分支，而这些提交应该分布在不同的分支里</h3><p>假设你有一个 <code>master</code> 分支， 执行 <code>git log</code> , 你看到你做过两次提交:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> log</pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>commit e3851e817c451cc36f2e6f3049db528415e3c114</pre></td></tr><tr><td data-num="4"></td><td><pre>Author: Alex Lee <span class="token operator">&lt;</span>alexlee@example.com<span class="token operator">></span></pre></td></tr><tr><td data-num="5"></td><td><pre>Date:   Tue Jul <span class="token number">22</span> <span class="token number">15</span>:39:27 <span class="token number">2014</span> <span class="token parameter variable">-0400</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>    Bug <span class="token comment">#21 - Added CSRF protection</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>commit 5ea51731d150f7ddc4a365437931cd8be3bf3131</pre></td></tr><tr><td data-num="10"></td><td><pre>Author: Alex Lee <span class="token operator">&lt;</span>alexlee@example.com<span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre>Date:   Tue Jul <span class="token number">22</span> <span class="token number">15</span>:39:12 <span class="token number">2014</span> <span class="token parameter variable">-0400</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>    Bug <span class="token comment">#14 - Fixed spacing on title</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>commit a13b85e984171c6e2a1729bb061994525f626d14</pre></td></tr><tr><td data-num="16"></td><td><pre>Author: Aki Rose <span class="token operator">&lt;</span>akirose@example.com<span class="token operator">></span></pre></td></tr><tr><td data-num="17"></td><td><pre>Date:   Tue Jul <span class="token number">21</span> 01:12:48 <span class="token number">2014</span> <span class="token parameter variable">-0400</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>    First commit</pre></td></tr></table></figure><p>让我们用提交 hash (commit hash) 标记 bug ( <code>e3851e8</code> for #21, <code>5ea5173</code> for #14).</p><p>首先，我们把 <code>master</code> 分支重置到正确的提交 ( <code>a13b85e</code> ):</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> reset <span class="token parameter variable">--hard</span> a13b85e</pre></td></tr><tr><td data-num="2"></td><td><pre>HEAD is now at a13b85e</pre></td></tr></table></figure><p>现在，我们对 bug #21 创建一个新的分支:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> checkout <span class="token parameter variable">-b</span> <span class="token number">21</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span>$</pre></td></tr></table></figure><p>接着，我们用 <em>cherry-pick</em> 把对 bug #21 的提交放入当前分支。 这意味着我们将应用 (apply) 这个提交 (commit)，仅仅这一个提交 (commit)，直接在 HEAD 上面。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span>$ <span class="token function">git</span> cherry-pick e3851e8</pre></td></tr></table></figure><p>这时候，这里可能会产生冲突， 参见<a href="#interactive-rebase">交互式 rebasing 章</a> <a href="#merge-conflict"><strong>冲突节</strong></a> 解决冲突.</p><p>再者， 我们为 bug #14 创建一个新的分支，也基于 <code>master</code> 分支</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span>$ <span class="token function">git</span> checkout master</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> checkout <span class="token parameter variable">-b</span> <span class="token number">14</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span>$</pre></td></tr></table></figure><p>最后，为 bug #14 执行 <code>cherry-pick</code> :</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span>$ <span class="token function">git</span> cherry-pick 5ea5173</pre></td></tr></table></figure><h3 id="我想删除上游upstream分支被删除了的本地分支"><a class="anchor" href="#我想删除上游upstream分支被删除了的本地分支">#</a> 我想删除上游 (upstream) 分支被删除了的本地分支</h3><p>一旦你在 github 上面合并 (merge) 了一个 pull request, 你就可以删除你 fork 里被合并的分支。 如果你不准备继续在这个分支里工作，删除这个分支的本地拷贝会更干净，使你不会陷入工作分支和一堆陈旧分支的混乱之中。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> fetch <span class="token parameter variable">-p</span></pre></td></tr></table></figure><h3 id="我不小心删除了我的分支"><a class="anchor" href="#我不小心删除了我的分支">#</a> 我不小心删除了我的分支</h3><p>如果你定期推送到远程，多数情况下应该是安全的，但有些时候还是可能删除了还没有推到远程的分支。 让我们先创建一个分支和一个新的文件:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> checkout <span class="token parameter variable">-b</span> my-branch</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">(</span>my-branch<span class="token punctuation">)</span>$ <span class="token function">git</span> branch</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">(</span>my-branch<span class="token punctuation">)</span>$ <span class="token function">touch</span> foo.txt</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">(</span>my-branch<span class="token punctuation">)</span>$ <span class="token function">ls</span></pre></td></tr><tr><td data-num="5"></td><td><pre>README.md foo.txt</pre></td></tr></table></figure><p>添加文件并做一次提交</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>my-branch<span class="token punctuation">)</span>$ <span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">(</span>my-branch<span class="token punctuation">)</span>$ <span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">'foo.txt added'</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">(</span>my-branch<span class="token punctuation">)</span>$ foo.txt added</pre></td></tr><tr><td data-num="4"></td><td><pre> <span class="token number">1</span> files changed, <span class="token number">1</span> insertions<span class="token punctuation">(</span>+<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre> create mode <span class="token number">100644</span> foo.txt</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">(</span>my-branch<span class="token punctuation">)</span>$ <span class="token function">git</span> log</pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>commit 4e3cd85a670ced7cc17a2b5d8d3d809ac88d5012</pre></td></tr><tr><td data-num="9"></td><td><pre>Author: siemiatj <span class="token operator">&lt;</span>siemiatj@example.com<span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre>Date:   Wed Jul <span class="token number">30</span> 00:34:10 <span class="token number">2014</span> +0200</pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>    foo.txt added</pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>commit 69204cdf0acbab201619d95ad8295928e7f411d5</pre></td></tr><tr><td data-num="15"></td><td><pre>Author: Kate Hudson <span class="token operator">&lt;</span>katehudson@example.com<span class="token operator">></span></pre></td></tr><tr><td data-num="16"></td><td><pre>Date:   Tue Jul <span class="token number">29</span> <span class="token number">13</span>:14:46 <span class="token number">2014</span> <span class="token parameter variable">-0400</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>    Fixes <span class="token comment">#6: Force pushing after amending commits</span></pre></td></tr></table></figure><p>现在我们切回到主 (master) 分支，‘不小心的’删除 <code>my-branch</code> 分支</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>my-branch<span class="token punctuation">)</span>$ <span class="token function">git</span> checkout master</pre></td></tr><tr><td data-num="2"></td><td><pre>Switched to branch <span class="token string">'master'</span></pre></td></tr><tr><td data-num="3"></td><td><pre>Your branch is up-to-date with <span class="token string">'origin/master'</span><span class="token builtin class-name">.</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> branch <span class="token parameter variable">-D</span> my-branch</pre></td></tr><tr><td data-num="5"></td><td><pre>Deleted branch my-branch <span class="token punctuation">(</span>was 4e3cd85<span class="token punctuation">)</span>.</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token builtin class-name">echo</span> oh noes, deleted my branch<span class="token operator">!</span></pre></td></tr><tr><td data-num="7"></td><td><pre>oh noes, deleted my branch<span class="token operator">!</span></pre></td></tr></table></figure><p>在这时候你应该想起了 <code>reflog</code> , 一个升级版的日志，它存储了仓库 (repo) 里面所有动作的历史。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> reflog</pre></td></tr><tr><td data-num="2"></td><td><pre>69204cd HEAD@<span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span>: checkout: moving from my-branch to master</pre></td></tr><tr><td data-num="3"></td><td><pre>4e3cd85 HEAD@<span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">&#125;</span>: commit: foo.txt added</pre></td></tr><tr><td data-num="4"></td><td><pre>69204cd HEAD@<span class="token punctuation">&#123;</span><span class="token number">2</span><span class="token punctuation">&#125;</span>: checkout: moving from master to my-branch</pre></td></tr></table></figure><p>正如你所见，我们有一个来自删除分支的提交 hash (commit hash)，接下来看看是否能恢复删除了的分支。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> checkout <span class="token parameter variable">-b</span> my-branch-help</pre></td></tr><tr><td data-num="2"></td><td><pre>Switched to a new branch <span class="token string">'my-branch-help'</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">(</span>my-branch-help<span class="token punctuation">)</span>$ <span class="token function">git</span> reset <span class="token parameter variable">--hard</span> 4e3cd85</pre></td></tr><tr><td data-num="4"></td><td><pre>HEAD is now at 4e3cd85 foo.txt added</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">(</span>my-branch-help<span class="token punctuation">)</span>$ <span class="token function">ls</span></pre></td></tr><tr><td data-num="6"></td><td><pre>README.md foo.txt</pre></td></tr></table></figure><p>看！我们把删除的文件找回来了。 Git 的 <code>reflog</code> 在 rebasing 出错的时候也是同样有用的。</p><h3 id="我想删除一个分支"><a class="anchor" href="#我想删除一个分支">#</a> 我想删除一个分支</h3><p>删除一个远程分支:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> push origin <span class="token parameter variable">--delete</span> my-branch</pre></td></tr></table></figure><p>你也可以:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> push origin :my-branch</pre></td></tr></table></figure><p>删除一个本地分支:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> branch <span class="token parameter variable">-D</span> my-branch</pre></td></tr></table></figure><h3 id="我想从别人正在工作的远程分支签出checkout一个分支"><a class="anchor" href="#我想从别人正在工作的远程分支签出checkout一个分支">#</a> 我想从别人正在工作的远程分支签出 (checkout) 一个分支</h3><p>首先，从远程拉取 (fetch) 所有分支:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> fetch <span class="token parameter variable">--all</span></pre></td></tr></table></figure><p>假设你想要从远程的 <code>daves</code> 分支签出到本地的 <code>daves</code></p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> checkout <span class="token parameter variable">--track</span> origin/daves</pre></td></tr><tr><td data-num="2"></td><td><pre>Branch daves <span class="token builtin class-name">set</span> up to track remote branch daves from origin.</pre></td></tr><tr><td data-num="3"></td><td><pre>Switched to a new branch <span class="token string">'daves'</span></pre></td></tr></table></figure><p>( <code>--track</code> 是 <code>git checkout -b [branch] [remotename]/[branch]</code> 的简写)</p><p>这样就得到了一个 <code>daves</code> 分支的本地拷贝，任何推过 (pushed) 的更新，远程都能看到.</p><h2 id="标签"><a class="anchor" href="#标签">#</a> 标签</h2><h3 id="添加标签"><a class="anchor" href="#添加标签">#</a> 添加标签</h3><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>$ <span class="token function">git</span> tag <span class="token operator">&lt;</span>tag-name<span class="token operator">></span></pre></td></tr></table></figure><h3 id="添加标签并附加消息"><a class="anchor" href="#添加标签并附加消息">#</a> 添加标签并附加消息</h3><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>$ <span class="token function">git</span> tag <span class="token parameter variable">-a</span> <span class="token operator">&lt;</span>tag-name<span class="token operator">></span></pre></td></tr></table></figure><h3 id="删除标签"><a class="anchor" href="#删除标签">#</a> 删除标签</h3><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> tag <span class="token parameter variable">-d</span> <span class="token operator">&lt;</span>tag_name<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">git</span> push <span class="token operator">&lt;</span>remote<span class="token operator">></span> :refs/tags/<span class="token operator">&lt;</span>tag_name<span class="token operator">></span></pre></td></tr></table></figure><h3 id="恢复已删除标签"><a class="anchor" href="#恢复已删除标签">#</a> 恢复已删除标签</h3><p>如果你想恢复一个已删除标签 (tag), 可以按照下面的步骤：首先，需要找到无法访问的标签 (unreachable tag):</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> <span class="token function">fsck</span> <span class="token parameter variable">--unreachable</span> <span class="token operator">|</span> <span class="token function">grep</span> tag</pre></td></tr></table></figure><p>记下这个标签 (tag) 的 hash，然后用 Git 的 <span class="exturl" data-url="aHR0cDovL2dpdC1zY20uY29tL2RvY3MvZ2l0LXVwZGF0ZS1yZWY=">update-ref</span>:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> update-ref refs/tags/<span class="token operator">&lt;</span>tag_name<span class="token operator">></span> <span class="token operator">&lt;</span>hash<span class="token operator">></span></pre></td></tr></table></figure><p>这时你的标签 (tag) 应该已经恢复了。</p><h2 id="rebase-和-merge"><a class="anchor" href="#rebase-和-merge">#</a> Rebase 和 Merge</h2><blockquote><p>merge 与 rebase 虽然是 git 常用功能，但是强烈建议不要使用 git 命令来完成这项工作。</p><p>因为如果出现代码冲突，在没有代码比对工具的情况下，实在太艰难了。</p><p>你可以考虑使用各种 Git GUI 工具。</p></blockquote><h3 id="将分支合并到当前-head-中"><a class="anchor" href="#将分支合并到当前-head-中">#</a> 将分支合并到当前 HEAD 中</h3><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> merge <span class="token operator">&lt;</span>branch<span class="token operator">></span></pre></td></tr></table></figure><h3 id="将当前-head-版本重置到分支中"><a class="anchor" href="#将当前-head-版本重置到分支中">#</a> 将当前 HEAD 版本重置到分支中</h3><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> rebase <span class="token operator">&lt;</span>branch<span class="token operator">></span></pre></td></tr></table></figure><h3 id="撤销-rebasemerge"><a class="anchor" href="#撤销-rebasemerge">#</a> 撤销 rebase/merge</h3><p>你可以合并 (merge) 或 rebase 了一个错误的分支，或者完成不了一个进行中的 rebase/merge。 Git 在进行危险操作的时候会把原始的 HEAD 保存在一个叫 ORIG_HEAD 的变量里，所以要把分支恢复到 rebase/merge 前的状态是很容易的。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>my-branch<span class="token punctuation">)</span>$ <span class="token function">git</span> reset <span class="token parameter variable">--hard</span> ORIG_HEAD</pre></td></tr></table></figure><h3 id="我已经-rebase-过-但是我不想强推force-push"><a class="anchor" href="#我已经-rebase-过-但是我不想强推force-push">#</a> 我已经 rebase 过，但是我不想强推 (force push)</h3><p>不幸的是，如果你想把这些变化 (changes) 反应到远程分支上，你就必须得强推 (force push)。 是因你快进 (Fast forward) 了提交，改变了 Git 历史，远程分支不会接受变化 (changes)，除非强推 (force push)。这就是许多人使用 merge 工作流，而不是 rebasing 工作流的主要原因之一， 开发者的强推 (force push) 会使大的团队陷入麻烦。使用时需要注意，一种安全使用 rebase 的方法是，不要把你的变化 (changes) 反映到远程分支上，而是按下面的做:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> checkout my-branch</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">(</span>my-branch<span class="token punctuation">)</span>$ <span class="token function">git</span> rebase <span class="token parameter variable">-i</span> master</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">(</span>my-branch<span class="token punctuation">)</span>$ <span class="token function">git</span> checkout master</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> merge --ff-only my-branch</pre></td></tr></table></figure><p>更多，参见 <span class="exturl" data-url="aHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMTA1ODMxMi9ob3ctY2FuLWktdXNlLWdpdC1yZWJhc2Utd2l0aG91dC1yZXF1aXJpbmctYS1mb3JjZWQtcHVzaA==">this SO thread</span>.</p><h3 id="我需要组合combine几个提交commit"><a class="anchor" href="#我需要组合combine几个提交commit">#</a> 我需要组合 (combine) 几个提交 (commit)</h3><p>假设你的工作分支将会做对于 <code>master</code> 的 pull-request。 一般情况下你不关心提交 (commit) 的时间戳，只想组合 <em>所有</em> 提交 (commit) 到一个单独的里面，然后重置 (reset) 重提交 (recommit)。 确保主 (master) 分支是最新的和你的变化都已经提交了，然后:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>my-branch<span class="token punctuation">)</span>$ <span class="token function">git</span> reset <span class="token parameter variable">--soft</span> master</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">(</span>my-branch<span class="token punctuation">)</span>$ <span class="token function">git</span> commit <span class="token parameter variable">-am</span> <span class="token string">"New awesome feature"</span></pre></td></tr></table></figure><p>如果你想要更多的控制，想要保留时间戳，你需要做交互式 rebase (interactive rebase):</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>my-branch<span class="token punctuation">)</span>$ <span class="token function">git</span> rebase <span class="token parameter variable">-i</span> master</pre></td></tr></table></figure><p>如果没有相对的其它分支， 你将不得不相对自己的 <code>HEAD</code> 进行 rebase。 例如：你想组合最近的两次提交 (commit), 你将相对于 <code>HEAD\~2</code> 进行 rebase， 组合最近 3 次提交 (commit), 相对于 <code>HEAD\~3</code> , 等等。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> rebase <span class="token parameter variable">-i</span> HEAD~2</pre></td></tr></table></figure><p>在你执行了交互式 rebase 的命令 (interactive rebase command) 后，你将在你的编辑器里看到类似下面的内容:</p><figure class="highlight vim"><figcaption data-lang="vim"></figcaption><table><tr><td data-num="1"></td><td><pre>pick a9c8a1d Some refactoring</pre></td></tr><tr><td data-num="2"></td><td><pre>pick 01b2fd8 New awesome feature</pre></td></tr><tr><td data-num="3"></td><td><pre>pick b729ad5 fixup</pre></td></tr><tr><td data-num="4"></td><td><pre>pick e3851e8 another <span class="token keyword">fix</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>## Rebase 8074d12<span class="token operator">.</span><span class="token operator">.</span>b729ad5 onto 8074d12</pre></td></tr><tr><td data-num="7"></td><td><pre>#</pre></td></tr><tr><td data-num="8"></td><td><pre>## Commands<span class="token punctuation">:</span></pre></td></tr><tr><td data-num="9"></td><td><pre>##  <span class="token keyword">p</span><span class="token punctuation">,</span> pick <span class="token operator">=</span> use commit</pre></td></tr><tr><td data-num="10"></td><td><pre>##  <span class="token keyword">r</span><span class="token punctuation">,</span> reword <span class="token operator">=</span> use commit<span class="token punctuation">,</span> but <span class="token keyword">edit</span> the commit message</pre></td></tr><tr><td data-num="11"></td><td><pre>##  <span class="token keyword">e</span><span class="token punctuation">,</span> <span class="token keyword">edit</span> <span class="token operator">=</span> use commit<span class="token punctuation">,</span> but <span class="token keyword">stop</span> <span class="token keyword">for</span> amending</pre></td></tr><tr><td data-num="12"></td><td><pre>##  s<span class="token punctuation">,</span> squash <span class="token operator">=</span> use commit<span class="token punctuation">,</span> but meld into <span class="token keyword">previous</span> commit</pre></td></tr><tr><td data-num="13"></td><td><pre>##  <span class="token keyword">f</span><span class="token punctuation">,</span> fixup <span class="token operator">=</span> like <span class="token string">"squash"</span><span class="token punctuation">,</span> but discard this commit's log message</pre></td></tr><tr><td data-num="14"></td><td><pre>##  <span class="token keyword">x</span><span class="token punctuation">,</span> exec <span class="token operator">=</span> run command <span class="token punctuation">(</span>the rest of the line<span class="token punctuation">)</span> using <span class="token keyword">shell</span></pre></td></tr><tr><td data-num="15"></td><td><pre>#</pre></td></tr><tr><td data-num="16"></td><td><pre>## These <span class="token builtin">lines</span> can <span class="token keyword">be</span> re<span class="token operator">-</span>ordered<span class="token punctuation">;</span> they are executed from <span class="token builtin">top</span> <span class="token keyword">to</span> bottom<span class="token operator">.</span></pre></td></tr><tr><td data-num="17"></td><td><pre>#</pre></td></tr><tr><td data-num="18"></td><td><pre>## If you remove a line here THAT COMMIT WILL BE LOST<span class="token operator">.</span></pre></td></tr><tr><td data-num="19"></td><td><pre>#</pre></td></tr><tr><td data-num="20"></td><td><pre>## However<span class="token punctuation">,</span> <span class="token keyword">if</span> you remove everything<span class="token punctuation">,</span> the rebase will <span class="token keyword">be</span> aborted<span class="token operator">.</span></pre></td></tr><tr><td data-num="21"></td><td><pre>#</pre></td></tr><tr><td data-num="22"></td><td><pre>## Note that empty commits are commented out</pre></td></tr></table></figure><p>所有以 <code>#</code> 开头的行都是注释，不会影响 rebase.</p><p>然后，你可以用任何上面命令列表的命令替换 <code>pick</code> , 你也可以通过删除对应的行来删除一个提交 (commit)。</p><p>例如，如果你想 <strong>单独保留最旧 (first) 的提交 (commit), 组合所有剩下的到第二个里面</strong>，你就应该编辑第二个提交 (commit) 后面的每个提交 (commit) 前的单词为 <code>f</code> :</p><figure class="highlight vim"><figcaption data-lang="vim"></figcaption><table><tr><td data-num="1"></td><td><pre>pick a9c8a1d Some refactoring</pre></td></tr><tr><td data-num="2"></td><td><pre>pick 01b2fd8 New awesome feature</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">f</span> b729ad5 fixup</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">f</span> e3851e8 another <span class="token keyword">fix</span></pre></td></tr></table></figure><p>如果你想组合这些提交 (commit) <strong>并重命名这个提交 (commit)</strong>, 你应该在第二个提交 (commit) 旁边添加一个 <code>r</code> ，或者更简单的用 <code>s</code> 替代 <code>f</code> :</p><figure class="highlight vim"><figcaption data-lang="vim"></figcaption><table><tr><td data-num="1"></td><td><pre>pick a9c8a1d Some refactoring</pre></td></tr><tr><td data-num="2"></td><td><pre>pick 01b2fd8 New awesome feature</pre></td></tr><tr><td data-num="3"></td><td><pre>s b729ad5 fixup</pre></td></tr><tr><td data-num="4"></td><td><pre>s e3851e8 another <span class="token keyword">fix</span></pre></td></tr></table></figure><p>你可以在接下来弹出的文本提示框里重命名提交 (commit)。</p><figure class="highlight vim"><figcaption data-lang="vim"></figcaption><table><tr><td data-num="1"></td><td><pre>Newer<span class="token punctuation">,</span> awesomer features</pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>## Please enter the commit message <span class="token keyword">for</span> your <span class="token keyword">changes</span><span class="token operator">.</span> Lines starting</pre></td></tr><tr><td data-num="4"></td><td><pre>## with <span class="token string">'#'</span> will <span class="token keyword">be</span> ignored<span class="token punctuation">,</span> and an empty message aborts the commit<span class="token operator">.</span></pre></td></tr><tr><td data-num="5"></td><td><pre>## rebase <span class="token keyword">in</span> progress<span class="token punctuation">;</span> onto 8074d12</pre></td></tr><tr><td data-num="6"></td><td><pre>## You are currently editing a commit <span class="token keyword">while</span> rebasing branch <span class="token string">'master'</span> <span class="token keyword">on</span> <span class="token string">'8074d12'</span><span class="token operator">.</span></pre></td></tr><tr><td data-num="7"></td><td><pre>#</pre></td></tr><tr><td data-num="8"></td><td><pre>## Changes <span class="token keyword">to</span> <span class="token keyword">be</span> committed<span class="token punctuation">:</span></pre></td></tr><tr><td data-num="9"></td><td><pre># <span class="token builtin">modified</span><span class="token punctuation">:</span>   README<span class="token operator">.</span>md</pre></td></tr><tr><td data-num="10"></td><td><pre>#</pre></td></tr></table></figure><p>如果成功了，你应该看到类似下面的内容:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ Successfully rebased and updated refs/heads/master.</pre></td></tr></table></figure><h4 id="安全合并merging策略"><a class="anchor" href="#安全合并merging策略">#</a> 安全合并 (merging) 策略</h4><p><code>--no-commit</code> 执行合并 (merge) 但不自动提交，给用户在做提交前检查和修改的机会。 <code>no-ff</code> 会为特性分支 (feature branch) 的存在过留下证据，保持项目历史一致。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> merge --no-ff --no-commit my-branch</pre></td></tr></table></figure><h4 id="我需要将一个分支合并成一个提交commit"><a class="anchor" href="#我需要将一个分支合并成一个提交commit">#</a> 我需要将一个分支合并成一个提交 (commit)</h4><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> merge <span class="token parameter variable">--squash</span> my-branch</pre></td></tr></table></figure><h4 id="我只想组合combine未推的提交unpushed-commit"><a class="anchor" href="#我只想组合combine未推的提交unpushed-commit">#</a> 我只想组合 (combine) 未推的提交 (unpushed commit)</h4><p>有时候，在将数据推向上游之前，你有几个正在进行的工作提交 (commit)。这时候不希望把已经推 (push) 过的组合进来，因为其他人可能已经有提交 (commit) 引用它们了。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> rebase <span class="token parameter variable">-i</span> @<span class="token punctuation">&#123;</span>u<span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>这会产生一次交互式的 rebase (interactive rebase), 只会列出没有推 (push) 的提交 (commit)， 在这个列表时进行 reorder/fix/squash 都是安全的。</p><h3 id="检查是否分支上的所有提交commit都合并merge过了"><a class="anchor" href="#检查是否分支上的所有提交commit都合并merge过了">#</a> 检查是否分支上的所有提交 (commit) 都合并 (merge) 过了</h3><p>检查一个分支上的所有提交 (commit) 是否都已经合并 (merge) 到了其它分支，你应该在这些分支的 head (或任何 commits) 之间做一次 diff:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> log <span class="token parameter variable">--graph</span> --left-right --cherry-pick <span class="token parameter variable">--oneline</span> HEAD<span class="token punctuation">..</span>.feature/120-on-scroll</pre></td></tr></table></figure><p>这会告诉你在一个分支里有而另一个分支没有的所有提交 (commit), 和分支之间不共享的提交 (commit) 的列表。 另一个做法可以是:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> log master ^feature/120-on-scroll --no-merges</pre></td></tr></table></figure><h3 id="交互式-rebaseinteractive-rebase可能出现的问题"><a class="anchor" href="#交互式-rebaseinteractive-rebase可能出现的问题">#</a> 交互式 rebase (interactive rebase) 可能出现的问题</h3><h4 id="这个-rebase-编辑屏幕出现noop"><a class="anchor" href="#这个-rebase-编辑屏幕出现noop">#</a> 这个 rebase 编辑屏幕出现 'noop'</h4><p>如果你看到的是这样:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>noop</pre></td></tr></table></figure><p>这意味着你 rebase 的分支和当前分支在同一个提交 (commit) 上，或者 <em>领先 (ahead)</em> 当前分支。 你可以尝试:</p><ul><li>检查确保主 (master) 分支没有问题</li><li>rebase <code>HEAD\~2</code> 或者更早</li></ul><h4 id="有冲突的情况"><a class="anchor" href="#有冲突的情况">#</a> 有冲突的情况</h4><p>如果你不能成功的完成 rebase, 你可能必须要解决冲突。</p><p>首先执行 <code>git status</code> 找出哪些文件有冲突:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>my-branch<span class="token punctuation">)</span>$ <span class="token function">git</span> status</pre></td></tr><tr><td data-num="2"></td><td><pre>On branch my-branch</pre></td></tr><tr><td data-num="3"></td><td><pre>Changes not staged <span class="token keyword">for</span> commit:</pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">(</span>use <span class="token string">"git add &lt;file>..."</span> to update what will be committed<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">(</span>use <span class="token string">"git checkout -- &lt;file>..."</span> to discard changes <span class="token keyword">in</span> working directory<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>  modified:   README.md</pre></td></tr></table></figure><p>在这个例子里面， <code>README.md</code> 有冲突。 打开这个文件找到类似下面的内容:</p><figure class="highlight vim"><figcaption data-lang="vim"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token operator">&lt;</span> HEAD</pre></td></tr><tr><td data-num="2"></td><td><pre>   some code</pre></td></tr><tr><td data-num="3"></td><td><pre>   <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span></pre></td></tr><tr><td data-num="4"></td><td><pre>   some code</pre></td></tr><tr><td data-num="5"></td><td><pre>   <span class="token operator">></span><span class="token operator">></span><span class="token operator">></span><span class="token operator">></span><span class="token operator">></span><span class="token operator">></span><span class="token operator">></span> <span class="token keyword">new</span><span class="token operator">-</span>commit</pre></td></tr></table></figure><p>你需要解决新提交的代码 (示例里，从中间 <code>==</code> 线到 <code>new-commit</code> 的地方) 与 <code>HEAD</code> 之间不一样的地方.</p><p>有时候这些合并非常复杂，你应该使用可视化的差异编辑器 (visual diff editor):</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master*<span class="token punctuation">)</span>$ <span class="token function">git</span> mergetool <span class="token parameter variable">-t</span> opendiff</pre></td></tr></table></figure><p>在你解决完所有冲突和测试过后， <code>git add</code> 变化了的 (changed) 文件，然后用 <code>git rebase --continue</code> 继续 rebase。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>my-branch<span class="token punctuation">)</span>$ <span class="token function">git</span> <span class="token function">add</span> README.md</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">(</span>my-branch<span class="token punctuation">)</span>$ <span class="token function">git</span> rebase <span class="token parameter variable">--continue</span></pre></td></tr></table></figure><p>如果在解决完所有的冲突过后，得到了与提交前一样的结果，可以执行 <code>git rebase --skip</code> 。</p><p>任何时候你想结束整个 rebase 过程，回来 rebase 前的分支状态，你可以做:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>my-branch<span class="token punctuation">)</span>$ <span class="token function">git</span> rebase <span class="token parameter variable">--abort</span></pre></td></tr></table></figure><h2 id="查看信息"><a class="anchor" href="#查看信息">#</a> 查看信息</h2><p>显示工作路径下已修改的文件： <code>git status</code></p><p>显示与上次提交版本文件的不同： <code>git diff</code></p><p>显示提交历史：</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 从最新提交开始，显示所有的提交记录（显示 hash， 作者信息，提交的标题和时间）</span></pre></td></tr><tr><td data-num="2"></td><td><pre>$ <span class="token function">git</span> log</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># 显示某个用户的所有提交</span></pre></td></tr><tr><td data-num="5"></td><td><pre>$ <span class="token function">git</span> log <span class="token parameter variable">--author</span><span class="token operator">=</span><span class="token string">"username"</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment"># 显示某个文件的所有修改</span></pre></td></tr><tr><td data-num="8"></td><td><pre>$ <span class="token function">git</span> log <span class="token parameter variable">-p</span> <span class="token operator">&lt;</span>file<span class="token operator">></span></pre></td></tr></table></figure><p>显示搜索内容：</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 从当前目录的所有文件中查找文本内容</span></pre></td></tr><tr><td data-num="2"></td><td><pre>$ <span class="token function">git</span> <span class="token function">grep</span> <span class="token string">"Hello"</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># 在某一版本中搜索文本</span></pre></td></tr><tr><td data-num="5"></td><td><pre>$ <span class="token function">git</span> <span class="token function">grep</span> <span class="token string">"Hello"</span> v2.5</pre></td></tr></table></figure><h2 id="其他"><a class="anchor" href="#其他">#</a> 其他</h2><h3 id="克隆所有子模块"><a class="anchor" href="#克隆所有子模块">#</a> 克隆所有子模块</h3><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> clone <span class="token parameter variable">--recursive</span> git://github.com/foo/bar.git</pre></td></tr></table></figure><p>如果已经克隆了:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> submodule update <span class="token parameter variable">--init</span> <span class="token parameter variable">--recursive</span></pre></td></tr></table></figure><h3 id="已删除补丁patch"><a class="anchor" href="#已删除补丁patch">#</a> 已删除补丁 (patch)</h3><p>如果某人在 GitHub 上给你发了一个 pull request, 但是然后他删除了他自己的原始 fork, 你将没法克隆他们的提交 (commit) 或使用 <code>git am</code> 。在这种情况下，最好手动的查看他们的提交 (commit)，并把它们拷贝到一个本地新分支，然后做提交。</p><p>做完提交后，再修改作者，参见<a href="#commit-wrong-author">变更作者</a>。 然后，应用变化，再发起一个新的 pull request。</p><h2 id="跟踪文件tracking-files"><a class="anchor" href="#跟踪文件tracking-files">#</a> 跟踪文件 (Tracking Files)</h2><h3 id="我只想改变一个文件名字的大小写而不修改内容"><a class="anchor" href="#我只想改变一个文件名字的大小写而不修改内容">#</a> 我只想改变一个文件名字的大小写，而不修改内容</h3><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> <span class="token function">mv</span> <span class="token parameter variable">--force</span> myfile MyFile</pre></td></tr></table></figure><h3 id="我想从-git-删除一个文件但保留该文件"><a class="anchor" href="#我想从-git-删除一个文件但保留该文件">#</a> 我想从 Git 删除一个文件，但保留该文件</h3><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> <span class="token function">rm</span> <span class="token parameter variable">--cached</span> log.txt</pre></td></tr></table></figure><h2 id="fork-项目"><a class="anchor" href="#fork-项目">#</a> Fork 项目</h2><p>GitHub 中 Fork 是 服务端的代码仓库克隆（即 新克隆出来的代码仓库在远程服务端），包含了原来的仓库（即 upstream repository，上游仓库）所有内容，如分支、Tag、提交。代码托管服务（如 Github、BitBucket）提供了方便的完成 Fork 操作的功能（在仓库页面点一下 Fork 按钮）。这样有了一个你自己的可以自由提交的远程仓库，然后可以通过的 Pull Request 把你的提交贡献回 原仓库。而对于原仓库 Owner 来说，鼓励别人 Fork 自己的仓库，通过 Pull Request 给自己的仓库做贡献，也能提高了自己仓库的知名度。</p><blockquote><p>参考：<span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmdpdGh1Yi5jb20vZW4vZ2l0aHViL2dldHRpbmctc3RhcnRlZC13aXRoLWdpdGh1Yi9mb3JrLWEtcmVwbw==">Fork a repo</span></p></blockquote><p>（1）执行 <code>git remote -v</code> ，您将看到当前为 fork 配置的远程存储库。</p><p>（2）添加上游项目的仓库地址</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> remote <span class="token function">add</span> upstream <span class="token operator">&lt;</span>github仓库地址<span class="token operator">></span></pre></td></tr></table></figure><p>（3）确认是否添加成功，再次键入 <code>git remote -v</code> 。</p><p>（4）获取上游项目更新，可以执行 <code>git fetch upstream</code></p><p>（5）同步上游项目的代码到新仓库</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># merge</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">git</span> merge upstream/master</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># rebase</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">git</span> rebase upstream/master origin/master</pre></td></tr></table></figure><h2 id="我不知道我做错了些什么"><a class="anchor" href="#我不知道我做错了些什么">#</a> 我不知道我做错了些什么</h2><p>你把事情搞砸了：你 <code>重置(reset)</code> 了一些东西，或者你合并了错误的分支，亦或你强推了后找不到你自己的提交 (commit) 了。有些时候，你一直都做得很好，但你想回到以前的某个状态。</p><p>这就是 <code>git reflog</code> 的目的， <code>reflog</code> 记录对分支顶端 (the tip of a branch) 的任何改变，即使那个顶端没有被任何分支或标签引用。基本上，每次 HEAD 的改变，一条新的记录就会增加到 <code>reflog</code> 。遗憾的是，这只对本地分支起作用，且它只跟踪动作 (例如，不会跟踪一个没有被记录的文件的任何改变)。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>master<span class="token punctuation">)</span>$ <span class="token function">git</span> reflog</pre></td></tr><tr><td data-num="2"></td><td><pre>0a2e358 HEAD@<span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span>: reset: moving to HEAD<span class="token punctuation">\</span>~2</pre></td></tr><tr><td data-num="3"></td><td><pre>0254ea7 HEAD@<span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">&#125;</span>: checkout: moving from <span class="token number">2.2</span> to master</pre></td></tr><tr><td data-num="4"></td><td><pre>c10f740 HEAD@<span class="token punctuation">&#123;</span><span class="token number">2</span><span class="token punctuation">&#125;</span>: checkout: moving from master to <span class="token number">2.2</span></pre></td></tr></table></figure><p>上面的 reflog 展示了从 master 分支签出 (checkout) 到 2.2 分支，然后再签回。 那里，还有一个硬重置 (hard reset) 到一个较旧的提交。最新的动作出现在最上面以 <code>HEAD@&#123;0&#125;</code> 标识.</p><p>如果事实证明你不小心回移 (move back) 了提交 (commit), reflog 会包含你不小心回移前 master 上指向的提交 (0254ea7)。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">git</span> reset <span class="token parameter variable">--hard</span> 0254ea7</pre></td></tr></table></figure><p>然后使用 git reset 就可以把 master 改回到之前的 commit，这提供了一个在历史被意外更改情况下的安全网。</p><h2 id="资料"><a class="anchor" href="#资料">#</a> 📚 资料</h2><ul><li><strong>官方资源</strong><ul><li><span class="exturl" data-url="aHR0cHM6Ly9naXQtc2NtLmNvbS8=">Git 官网</span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2dpdC9naXQ=">Git Github</span></li><li><span class="exturl" data-url="aHR0cHM6Ly9ndWlkZXMuZ2l0aHViLmNvbS8=">Github 官方教程</span></li></ul></li><li><strong>模板</strong><ul><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2dpdGh1Yi9naXRpZ25vcmU=">gitignore 模板</span> - .gitignore 文件模板</li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FsZXhrYXJhdGFyYWtpcy9naXRhdHRyaWJ1dGVz">gitattributes 模板</span> - .gitattributes 文件模板</li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3RpaW1ncmVlbi9naXRodWItY2hlYXQtc2hlZXQ=">github-cheat-sheet</span> - git 命令简略图表</li></ul></li><li><strong>Git 教程</strong><ul><li><span class="exturl" data-url="aHR0cHM6Ly9sZWFybmdpdGJyYW5jaGluZy5qcy5vcmcv">Learn Git branching</span> - 交互式教程</li><li><span class="exturl" data-url="aHR0cHM6Ly9naXQtc2NtLmNvbS9ib29rL3poL3Yy">Git 官方推荐教程</span> - Scott Chacon 的 Git 书。<ul><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2s4OGh1ZHNvbi9naXQtZmxpZ2h0LXJ1bGVz">git-flight-rules</span></li></ul></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tLzUyMXh1ZXdlaWhhbi9naXQtdGlwcw==">git-tips</span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2dlZWVlZWVlZWVrL2dpdC1yZWNpcGVz">Git 中文教程</span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cubGlhb3h1ZWZlbmcuY29tL3dpa2kvMDAxMzczOTUxNjMwNTkyOTYwNmRkMTgzNjEyNDg1NzhjNjdiODA2N2M4YzAxN2IwMDA=">廖雪峰的 Git 教程</span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3hpcm9uZy9teS1naXQ=">有关 git 的学习资源</span></li></ul></li><li><strong>文章</strong><ul><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2s4OGh1ZHNvbi9naXQtZmxpZ2h0LXJ1bGVzL2Jsb2IvbWFzdGVyL1JFQURNRV96aC1DTi5tZA==">Git Cookbook</span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tLzUyMXh1ZXdlaWhhbi9naXQtdGlwcw==">Git 奇技淫巧</span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FzZWFkYXkvZ2l0LXN0eWxlLWd1aWRl">Git 风格指南</span></li><li><span class="exturl" data-url="aHR0cDovL3d3dy5jbmJsb2dzLmNvbS9jbmJsb2dzZmFucy9wLzUwNzUwNzMuaHRtbA==">Git 在团队中的最佳实践 -- 如何正确使用 Git Flow</span></li><li><span class="exturl" data-url="aHR0cDovL3d3dy5ydWFueWlmZW5nLmNvbS9ibG9nLzIwMTYvMDEvY29tbWl0X21lc3NhZ2VfY2hhbmdlX2xvZy5odG1s">Commit message 和 Change log 编写指南</span></li></ul></li><li><strong>Git 工具</strong><ul><li><span class="exturl" data-url="aHR0cHM6Ly9naXQtc2NtLmNvbS9kb3dubG9hZHMvZ3Vpcw==">guis</span> - Git 官网展示的客户端工具列表。</li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2dvZ2l0cy9nb2dz">gogs</span> - 极易搭建的自助 Git 服务。</li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL252aWUvZ2l0Zmxvdw==">gitflow</span> - 应用 <span class="exturl" data-url="aHR0cDovL252aWUuY29tL3Bvc3RzL2Etc3VjY2Vzc2Z1bC1naXQtYnJhbmNoaW5nLW1vZGVsLw==">fit-flow</span> 模型的工具。</li><li><span class="exturl" data-url="aHR0cDovL2ZpcnN0YWlkZ2l0LmlvLw==">firstaidgit.io</span> 一个可搜索的最常被问到的 Git 的问题</li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3VuaXhvcm4vZ2l0LWV4dHJhLWNvbW1hbmRz">git-extra-commands</span> - 一堆有用的额外的 Git 脚本</li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3RqL2dpdC1leHRyYXM=">git-extras</span> - GIT 工具集 -- repo summary, repl, changelog population, author commit percentages and more</li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3F3M3J0bWFuL2dpdC1maXJl">git-fire</span> - git-fire 是一个 Git 插件，用于帮助在紧急情况下添加所有当前文件，做提交 (committing), 和推 (push) 到一个新分支 (阻止合并冲突)。</li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2dpdC10aXBzL3RpcHM=">git-tips</span> - Git 小提示</li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL09yaWdpbmF0ZS9naXQtdG93bg==">git-town</span> - 通用，高级 Git 工作流支持！</li></ul></li><li><strong>GUI 客户端</strong><ul><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuZ2l0a3Jha2VuLmNvbS8=">GitKraken</span> - 豪华的 Git 客户端 Windows, Mac &amp; Linux</li><li><span class="exturl" data-url="aHR0cHM6Ly9naXQtY29sYS5naXRodWIuaW8v">git-cola</span> - 另外一个 Git 客户端 Windows &amp; OS X</li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2dpdC11cC9HaXRVcA==">GitUp</span> - 一个新的 Git 客户端，在处理 Git 的复杂性上有自己的特点</li><li><span class="exturl" data-url="aHR0cHM6Ly9yb3dhbmouZ2l0aHViLmlvL2dpdHgv">gitx-dev</span> - 图形化的 Git 客户端 OS X</li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuc291cmNldHJlZWFwcC5jb20v">Source Tree</span> - 免费的图形化 Git 客户端 Windows &amp; OS X</li><li><span class="exturl" data-url="aHR0cDovL3d3dy5naXQtdG93ZXIuY29tLw==">Tower</span> - 图形化 Git 客户端 OS X (付费)</li></ul></li><li><strong>git cheat sheet</strong><ul><li><span class="exturl" data-url="aHR0cHM6Ly9zZXJ2aWNlcy5naXRodWIuY29tL29uLWRlbWFuZC9kb3dubG9hZHMvZ2l0aHViLWdpdC1jaGVhdC1zaGVldC5wZGY=">github-git-cheat-sheet</span></li></ul></li></ul><div class="tags"><a href="/tags/Git/" rel="tag"><i class="ic i-tag"></i> Git</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2022-12-26 16:55:32" itemprop="dateModified" datetime="2022-12-26T16:55:32+08:00">2022-12-26</time> </span><span id="posts/5c24f267/" class="item leancloud_visitors" data-flag-title="Git 帮助手册" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="Metal-Heart 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="Metal-Heart 支付宝"><p>支付宝</p></div><div><img data-src="/images/paypal.png" alt="Metal-Heart 贝宝"><p>贝宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>Metal-Heart <i class="ic i-at"><em>@</em></i>北海虽赊，扶摇可接</li><li class="link"><strong>本文链接：</strong> <a href="https://metal-heart.github.io/posts/5c24f267/" title="Git 帮助手册">https://metal-heart.github.io/posts/5c24f267/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/posts/5bf5ed66/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;s1.ax1x.com&#x2F;2023&#x2F;01&#x2F;09&#x2F;&#x2F;pSZv5WD.png" title="LSM树"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 树</span><h3>LSM树</h3></a></div><div class="item right"><a href="/posts/20210/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;s1.ax1x.com&#x2F;2023&#x2F;01&#x2F;09&#x2F;&#x2F;pSZvuZt.jpg" title="《芯片手册如何读与用》"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 硬件设计</span><h3>《芯片手册如何读与用》</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#git-%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C"><span class="toc-number">1.</span> <span class="toc-text">Git 帮助手册</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">1.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE"><span class="toc-number">1.2.</span> <span class="toc-text">配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF"><span class="toc-number">1.2.1.</span> <span class="toc-text">配置用户信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%99-git-%E5%91%BD%E4%BB%A4%E6%B7%BB%E5%8A%A0%E5%88%AB%E5%90%8D"><span class="toc-number">1.2.2.</span> <span class="toc-text">给 Git 命令添加别名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%93%E5%AD%98%E4%B8%80%E4%B8%AA%E4%BB%93%E5%BA%93%E7%9A%84%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E5%AF%86%E7%A0%81"><span class="toc-number">1.2.3.</span> <span class="toc-text">缓存一个仓库的用户名和密码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%93%E5%BA%93"><span class="toc-number">1.3.</span> <span class="toc-text">仓库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E4%BB%93%E5%BA%93"><span class="toc-number">1.3.1.</span> <span class="toc-text">初始化仓库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%8B%E9%9A%86%E4%BB%93%E5%BA%93"><span class="toc-number">1.3.2.</span> <span class="toc-text">克隆仓库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%82%A8%E8%97%8F"><span class="toc-number">1.4.</span> <span class="toc-text">储藏</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9A%82%E5%AD%98"><span class="toc-number">1.5.</span> <span class="toc-text">暂存</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9A%82%E5%AD%98%E6%8C%87%E5%AE%9A%E6%96%87%E4%BB%B6"><span class="toc-number">1.5.1.</span> <span class="toc-text">暂存指定文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9A%82%E5%AD%98%E5%BD%93%E5%89%8D%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%89%80%E6%9C%89%E4%BF%AE%E6%94%B9"><span class="toc-number">1.5.2.</span> <span class="toc-text">暂存当前目录下所有修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9A%82%E5%AD%98%E6%89%80%E6%9C%89%E4%BF%AE%E6%94%B9"><span class="toc-number">1.5.3.</span> <span class="toc-text">暂存所有修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9A%82%E5%AD%98%E6%96%87%E4%BB%B6%E9%83%A8%E5%88%86%E5%86%85%E5%AE%B9"><span class="toc-number">1.5.4.</span> <span class="toc-text">暂存文件部分内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%8A%E6%9A%82%E5%AD%98%E7%9A%84%E5%86%85%E5%AE%B9%E5%8F%98%E6%88%90%E6%9C%AA%E6%9A%82%E5%AD%98%E6%8A%8A%E6%9C%AA%E6%9A%82%E5%AD%98%E7%9A%84%E5%86%85%E5%AE%B9%E6%9A%82%E5%AD%98%E8%B5%B7%E6%9D%A5"><span class="toc-number">1.5.5.</span> <span class="toc-text">把暂存的内容变成未暂存，把未暂存的内容暂存起来</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%90%E4%BA%A4"><span class="toc-number">1.6.</span> <span class="toc-text">提交</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%9C%80%E8%BF%91%E4%B8%80%E6%AC%A1%E6%8F%90%E4%BA%A4"><span class="toc-number">1.6.1.</span> <span class="toc-text">查看最近一次提交</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%90%E4%BA%A4%E6%9C%AC%E5%9C%B0%E7%9A%84%E6%89%80%E6%9C%89%E4%BF%AE%E6%94%B9"><span class="toc-number">1.6.2.</span> <span class="toc-text">提交本地的所有修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%90%E4%BA%A4%E6%9A%82%E5%AD%98%E7%9A%84%E4%BF%AE%E6%94%B9"><span class="toc-number">1.6.3.</span> <span class="toc-text">提交暂存的修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%8A%E6%9A%82%E5%AD%98%E7%9A%84%E5%86%85%E5%AE%B9%E6%B7%BB%E5%8A%A0%E5%88%B0%E4%B8%8A%E4%B8%80%E6%AC%A1%E7%9A%84%E6%8F%90%E4%BA%A4"><span class="toc-number">1.6.4.</span> <span class="toc-text">把暂存的内容添加到上一次的提交</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%99%84%E5%8A%A0%E6%B6%88%E6%81%AF%E6%8F%90%E4%BA%A4"><span class="toc-number">1.6.5.</span> <span class="toc-text">附加消息提交</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%8F%90%E4%BA%A4%E4%BF%A1%E6%81%AF"><span class="toc-number">1.6.6.</span> <span class="toc-text">修改提交信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%8F%90%E4%BA%A4%E4%BF%A1%E6%81%AF%E4%B8%AD%E7%9A%84%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E9%82%AE%E7%AE%B1"><span class="toc-number">1.6.7.</span> <span class="toc-text">修改提交信息中的用户名和邮箱</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8E%E6%8F%90%E4%BA%A4%E4%B8%AD%E7%A7%BB%E9%99%A4%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6"><span class="toc-number">1.6.8.</span> <span class="toc-text">从提交中移除一个文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%9C%80%E5%90%8E%E4%B8%80%E6%AC%A1%E6%8F%90%E4%BA%A4"><span class="toc-number">1.6.9.</span> <span class="toc-text">删除最后一次提交</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E4%BB%BB%E6%84%8F%E6%8F%90%E4%BA%A4"><span class="toc-number">1.6.10.</span> <span class="toc-text">删除任意提交</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%91%E5%B0%9D%E8%AF%95%E6%8E%A8%E4%B8%80%E4%B8%AA%E4%BF%AE%E6%AD%A3%E5%90%8E%E7%9A%84%E6%8F%90%E4%BA%A4amended-commit%E5%88%B0%E8%BF%9C%E7%A8%8B%E4%BD%86%E6%98%AF%E6%8A%A5%E9%94%99"><span class="toc-number">1.6.11.</span> <span class="toc-text">我尝试推一个修正后的提交 (amended commit) 到远程，但是报错</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E5%B0%8F%E5%BF%83%E5%BC%BA%E5%88%B6%E9%87%8D%E7%BD%AE%E6%83%B3%E6%89%BE%E5%9B%9E%E5%86%85%E5%AE%B9"><span class="toc-number">1.6.12.</span> <span class="toc-text">不小心强制重置，想找回内容</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E7%BD%AE"><span class="toc-number">1.7.</span> <span class="toc-text">重置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0"><span class="toc-number">1.8.</span> <span class="toc-text">更新</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%A8%E9%80%81"><span class="toc-number">1.9.</span> <span class="toc-text">推送</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A8%E9%80%81%E6%8F%90%E4%BA%A4%E5%88%B0%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93"><span class="toc-number">1.9.1.</span> <span class="toc-text">推送提交到远程仓库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%91%E5%B8%83%E6%A0%87%E7%AD%BE"><span class="toc-number">1.9.2.</span> <span class="toc-text">发布标签</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%AA%E6%9A%82%E5%AD%98"><span class="toc-number">1.10.</span> <span class="toc-text">未暂存</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%8A%E6%9C%AA%E6%9A%82%E5%AD%98%E7%9A%84%E5%86%85%E5%AE%B9%E7%A7%BB%E5%8A%A8%E5%88%B0%E4%B8%80%E4%B8%AA%E6%96%B0%E5%88%86%E6%94%AF"><span class="toc-number">1.10.1.</span> <span class="toc-text">把未暂存的内容移动到一个新分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%91%E6%83%B3%E6%8A%8A%E6%9C%AA%E6%9A%82%E5%AD%98%E7%9A%84%E5%86%85%E5%AE%B9%E7%A7%BB%E5%8A%A8%E5%88%B0%E5%8F%A6%E4%B8%80%E4%B8%AA%E5%B7%B2%E5%AD%98%E5%9C%A8%E7%9A%84%E5%88%86%E6%94%AF"><span class="toc-number">1.10.2.</span> <span class="toc-text">我想把未暂存的内容移动到另一个已存在的分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%A2%E5%BC%83%E6%9C%AC%E5%9C%B0%E6%9C%AA%E6%8F%90%E4%BA%A4%E7%9A%84%E5%8F%98%E5%8C%96"><span class="toc-number">1.10.3.</span> <span class="toc-text">丢弃本地未提交的变化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%91%E6%83%B3%E4%B8%A2%E5%BC%83%E6%9F%90%E4%BA%9B%E6%9C%AA%E6%9A%82%E5%AD%98%E7%9A%84%E5%86%85%E5%AE%B9"><span class="toc-number">1.10.4.</span> <span class="toc-text">我想丢弃某些未暂存的内容</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E6%94%AF"><span class="toc-number">1.11.</span> <span class="toc-text">分支</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E5%87%BA%E6%89%80%E6%9C%89%E7%9A%84%E5%88%86%E6%94%AF"><span class="toc-number">1.11.1.</span> <span class="toc-text">列出所有的分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E5%87%BA%E6%89%80%E6%9C%89%E7%9A%84%E8%BF%9C%E7%AB%AF%E5%88%86%E6%94%AF"><span class="toc-number">1.11.2.</span> <span class="toc-text">列出所有的远端分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E5%BD%93%E5%89%8D%E5%88%86%E6%94%AF%E5%88%9B%E5%BB%BA%E6%96%B0%E5%88%86%E6%94%AF"><span class="toc-number">1.11.3.</span> <span class="toc-text">基于当前分支创建新分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF%E5%88%9B%E5%BB%BA%E6%96%B0%E5%88%86%E6%94%AF"><span class="toc-number">1.11.4.</span> <span class="toc-text">基于远程分支创建新分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%9C%AC%E5%9C%B0%E5%88%86%E6%94%AF"><span class="toc-number">1.11.5.</span> <span class="toc-text">删除本地分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%BA%E5%88%B6%E5%88%A0%E9%99%A4%E6%9C%AC%E5%9C%B0%E5%88%86%E6%94%AF"><span class="toc-number">1.11.6.</span> <span class="toc-text">强制删除本地分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF"><span class="toc-number">1.11.7.</span> <span class="toc-text">删除远程分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%87%E6%8D%A2%E5%88%86%E6%94%AF"><span class="toc-number">1.11.8.</span> <span class="toc-text">切换分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%B9%B6%E5%88%87%E6%8D%A2%E5%88%B0%E6%96%B0%E5%88%86%E6%94%AF"><span class="toc-number">1.11.9.</span> <span class="toc-text">创建并切换到新分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%91%E4%BB%8E%E9%94%99%E8%AF%AF%E7%9A%84%E5%88%86%E6%94%AF%E6%8B%89%E5%8F%96%E4%BA%86%E5%86%85%E5%AE%B9%E6%88%96%E6%8A%8A%E5%86%85%E5%AE%B9%E6%8B%89%E5%8F%96%E5%88%B0%E4%BA%86%E9%94%99%E8%AF%AF%E7%9A%84%E5%88%86%E6%94%AF"><span class="toc-number">1.11.10.</span> <span class="toc-text">我从错误的分支拉取了内容，或把内容拉取到了错误的分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%91%E6%83%B3%E6%89%94%E6%8E%89%E6%9C%AC%E5%9C%B0%E7%9A%84%E6%8F%90%E4%BA%A4commit%E4%BB%A5%E4%BE%BF%E6%88%91%E7%9A%84%E5%88%86%E6%94%AF%E4%B8%8E%E8%BF%9C%E7%A8%8B%E7%9A%84%E4%BF%9D%E6%8C%81%E4%B8%80%E8%87%B4"><span class="toc-number">1.11.11.</span> <span class="toc-text">我想扔掉本地的提交 (commit)，以便我的分支与远程的保持一致</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%91%E9%9C%80%E8%A6%81%E6%8F%90%E4%BA%A4%E5%88%B0%E4%B8%80%E4%B8%AA%E6%96%B0%E5%88%86%E6%94%AF%E4%BD%86%E9%94%99%E8%AF%AF%E7%9A%84%E6%8F%90%E4%BA%A4%E5%88%B0%E4%BA%86-master"><span class="toc-number">1.11.12.</span> <span class="toc-text">我需要提交到一个新分支，但错误的提交到了 master</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%91%E6%83%B3%E4%BF%9D%E7%95%99%E6%9D%A5%E8%87%AA%E5%8F%A6%E5%A4%96%E4%B8%80%E4%B8%AA-ref-ish-%E7%9A%84%E6%95%B4%E4%B8%AA%E6%96%87%E4%BB%B6"><span class="toc-number">1.11.13.</span> <span class="toc-text">我想保留来自另外一个 ref-ish 的整个文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%91%E6%8A%8A%E5%87%A0%E4%B8%AA%E6%8F%90%E4%BA%A4commit%E6%8F%90%E4%BA%A4%E5%88%B0%E4%BA%86%E5%90%8C%E4%B8%80%E4%B8%AA%E5%88%86%E6%94%AF%E8%80%8C%E8%BF%99%E4%BA%9B%E6%8F%90%E4%BA%A4%E5%BA%94%E8%AF%A5%E5%88%86%E5%B8%83%E5%9C%A8%E4%B8%8D%E5%90%8C%E7%9A%84%E5%88%86%E6%94%AF%E9%87%8C"><span class="toc-number">1.11.14.</span> <span class="toc-text">我把几个提交 (commit) 提交到了同一个分支，而这些提交应该分布在不同的分支里</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%91%E6%83%B3%E5%88%A0%E9%99%A4%E4%B8%8A%E6%B8%B8upstream%E5%88%86%E6%94%AF%E8%A2%AB%E5%88%A0%E9%99%A4%E4%BA%86%E7%9A%84%E6%9C%AC%E5%9C%B0%E5%88%86%E6%94%AF"><span class="toc-number">1.11.15.</span> <span class="toc-text">我想删除上游 (upstream) 分支被删除了的本地分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%91%E4%B8%8D%E5%B0%8F%E5%BF%83%E5%88%A0%E9%99%A4%E4%BA%86%E6%88%91%E7%9A%84%E5%88%86%E6%94%AF"><span class="toc-number">1.11.16.</span> <span class="toc-text">我不小心删除了我的分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%91%E6%83%B3%E5%88%A0%E9%99%A4%E4%B8%80%E4%B8%AA%E5%88%86%E6%94%AF"><span class="toc-number">1.11.17.</span> <span class="toc-text">我想删除一个分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%91%E6%83%B3%E4%BB%8E%E5%88%AB%E4%BA%BA%E6%AD%A3%E5%9C%A8%E5%B7%A5%E4%BD%9C%E7%9A%84%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF%E7%AD%BE%E5%87%BAcheckout%E4%B8%80%E4%B8%AA%E5%88%86%E6%94%AF"><span class="toc-number">1.11.18.</span> <span class="toc-text">我想从别人正在工作的远程分支签出 (checkout) 一个分支</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%87%E7%AD%BE"><span class="toc-number">1.12.</span> <span class="toc-text">标签</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E6%A0%87%E7%AD%BE"><span class="toc-number">1.12.1.</span> <span class="toc-text">添加标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E6%A0%87%E7%AD%BE%E5%B9%B6%E9%99%84%E5%8A%A0%E6%B6%88%E6%81%AF"><span class="toc-number">1.12.2.</span> <span class="toc-text">添加标签并附加消息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%A0%87%E7%AD%BE"><span class="toc-number">1.12.3.</span> <span class="toc-text">删除标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%81%A2%E5%A4%8D%E5%B7%B2%E5%88%A0%E9%99%A4%E6%A0%87%E7%AD%BE"><span class="toc-number">1.12.4.</span> <span class="toc-text">恢复已删除标签</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#rebase-%E5%92%8C-merge"><span class="toc-number">1.13.</span> <span class="toc-text">Rebase 和 Merge</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%86%E5%88%86%E6%94%AF%E5%90%88%E5%B9%B6%E5%88%B0%E5%BD%93%E5%89%8D-head-%E4%B8%AD"><span class="toc-number">1.13.1.</span> <span class="toc-text">将分支合并到当前 HEAD 中</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%86%E5%BD%93%E5%89%8D-head-%E7%89%88%E6%9C%AC%E9%87%8D%E7%BD%AE%E5%88%B0%E5%88%86%E6%94%AF%E4%B8%AD"><span class="toc-number">1.13.2.</span> <span class="toc-text">将当前 HEAD 版本重置到分支中</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%92%A4%E9%94%80-rebasemerge"><span class="toc-number">1.13.3.</span> <span class="toc-text">撤销 rebase&#x2F;merge</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%91%E5%B7%B2%E7%BB%8F-rebase-%E8%BF%87-%E4%BD%86%E6%98%AF%E6%88%91%E4%B8%8D%E6%83%B3%E5%BC%BA%E6%8E%A8force-push"><span class="toc-number">1.13.4.</span> <span class="toc-text">我已经 rebase 过，但是我不想强推 (force push)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%91%E9%9C%80%E8%A6%81%E7%BB%84%E5%90%88combine%E5%87%A0%E4%B8%AA%E6%8F%90%E4%BA%A4commit"><span class="toc-number">1.13.5.</span> <span class="toc-text">我需要组合 (combine) 几个提交 (commit)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E5%90%88%E5%B9%B6merging%E7%AD%96%E7%95%A5"><span class="toc-number">1.13.5.1.</span> <span class="toc-text">安全合并 (merging) 策略</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%88%91%E9%9C%80%E8%A6%81%E5%B0%86%E4%B8%80%E4%B8%AA%E5%88%86%E6%94%AF%E5%90%88%E5%B9%B6%E6%88%90%E4%B8%80%E4%B8%AA%E6%8F%90%E4%BA%A4commit"><span class="toc-number">1.13.5.2.</span> <span class="toc-text">我需要将一个分支合并成一个提交 (commit)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%88%91%E5%8F%AA%E6%83%B3%E7%BB%84%E5%90%88combine%E6%9C%AA%E6%8E%A8%E7%9A%84%E6%8F%90%E4%BA%A4unpushed-commit"><span class="toc-number">1.13.5.3.</span> <span class="toc-text">我只想组合 (combine) 未推的提交 (unpushed commit)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5%E6%98%AF%E5%90%A6%E5%88%86%E6%94%AF%E4%B8%8A%E7%9A%84%E6%89%80%E6%9C%89%E6%8F%90%E4%BA%A4commit%E9%83%BD%E5%90%88%E5%B9%B6merge%E8%BF%87%E4%BA%86"><span class="toc-number">1.13.6.</span> <span class="toc-text">检查是否分支上的所有提交 (commit) 都合并 (merge) 过了</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%A4%E4%BA%92%E5%BC%8F-rebaseinteractive-rebase%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">1.13.7.</span> <span class="toc-text">交互式 rebase (interactive rebase) 可能出现的问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%99%E4%B8%AA-rebase-%E7%BC%96%E8%BE%91%E5%B1%8F%E5%B9%95%E5%87%BA%E7%8E%B0noop"><span class="toc-number">1.13.7.1.</span> <span class="toc-text">这个 rebase 编辑屏幕出现 &#39;noop&#39;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E5%86%B2%E7%AA%81%E7%9A%84%E6%83%85%E5%86%B5"><span class="toc-number">1.13.7.2.</span> <span class="toc-text">有冲突的情况</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E4%BF%A1%E6%81%AF"><span class="toc-number">1.14.</span> <span class="toc-text">查看信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96"><span class="toc-number">1.15.</span> <span class="toc-text">其他</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%8B%E9%9A%86%E6%89%80%E6%9C%89%E5%AD%90%E6%A8%A1%E5%9D%97"><span class="toc-number">1.15.1.</span> <span class="toc-text">克隆所有子模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%B2%E5%88%A0%E9%99%A4%E8%A1%A5%E4%B8%81patch"><span class="toc-number">1.15.2.</span> <span class="toc-text">已删除补丁 (patch)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%9F%E8%B8%AA%E6%96%87%E4%BB%B6tracking-files"><span class="toc-number">1.16.</span> <span class="toc-text">跟踪文件 (Tracking Files)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%91%E5%8F%AA%E6%83%B3%E6%94%B9%E5%8F%98%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E5%90%8D%E5%AD%97%E7%9A%84%E5%A4%A7%E5%B0%8F%E5%86%99%E8%80%8C%E4%B8%8D%E4%BF%AE%E6%94%B9%E5%86%85%E5%AE%B9"><span class="toc-number">1.16.1.</span> <span class="toc-text">我只想改变一个文件名字的大小写，而不修改内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%91%E6%83%B3%E4%BB%8E-git-%E5%88%A0%E9%99%A4%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E4%BD%86%E4%BF%9D%E7%95%99%E8%AF%A5%E6%96%87%E4%BB%B6"><span class="toc-number">1.16.2.</span> <span class="toc-text">我想从 Git 删除一个文件，但保留该文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#fork-%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.17.</span> <span class="toc-text">Fork 项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%88%91%E4%B8%8D%E7%9F%A5%E9%81%93%E6%88%91%E5%81%9A%E9%94%99%E4%BA%86%E4%BA%9B%E4%BB%80%E4%B9%88"><span class="toc-number">1.18.</span> <span class="toc-text">我不知道我做错了些什么</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B5%84%E6%96%99"><span class="toc-number">1.19.</span> <span class="toc-text">📚 资料</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/posts/f34ad4cd/" rel="bookmark" title="如何优雅的玩转 Git">如何优雅的玩转 Git</a></li><li class="active"><a href="/posts/5c24f267/" rel="bookmark" title="Git帮助手册">Git帮助手册</a></li><li><a href="/posts/27650/" rel="bookmark" title="《Git知识点整理》">《Git知识点整理》</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Metal-Heart" data-src="/images/avatar.jpg"><p class="name" itemprop="name">Metal-Heart</p><div class="description" itemprop="description">老实是人生绝妙的法宝。虽然对人老实，你可能付出一定的代价，但日后你得到的，远比付出的多得多。</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">42</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">19</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">54</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL01ldGFsLUhlYXJ0Lw==" title="https:&#x2F;&#x2F;github.com&#x2F;Metal-Heart&#x2F;"><i class="ic i-github"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPXlvdXJpZA==" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;yourid"><i class="ic i-cloud-music"></i></span> <span class="exturl item about" data-url="aHR0cDovL2xvY2FsaG9zdDo0MDAwL2Fib3V0Lw==" title="http:&#x2F;&#x2F;localhost:4000&#x2F;about&#x2F;"><i class="ic i-address-card"></i></span> <span class="exturl item email" data-url="bWFpbHRvOm1ldGFsaGVhcnRoQGFsaXl1bi5jb20=" title="mailto:metalhearth@aliyun.com"><i class="ic i-envelope"></i></span> <span class="exturl item instagram" data-url="aHR0cHM6Ly9vc2h3aHViLmNvbS9pY2VpY2VpY2U=" title="https:&#x2F;&#x2F;oshwhub.com&#x2F;iceiceice"><i class="ic i-instagram"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友達</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>其他</a><ul class="submenu"><li class="item"><a href="https://metal-heart.github.io/mikutap/" rel="section"><i class="ic i-magic"></i>链接</a></li><li class="item"><a href="/census/" rel="section"><i class="ic i-user"></i>博客统计</a></li></ul></li><li class="item"><a href="/statistics/" rel="section"><i class="ic i-list-alt"></i>文章统计</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/posts/5bf5ed66/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/posts/20210/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/Hardware/" title="分类于 硬件设计">硬件设计</a></div><span><a href="/posts/62526/" title="《硬件设计经验谈》">《硬件设计经验谈》</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Hardware/" title="分类于 硬件设计">硬件设计</a></div><span><a href="/posts/20210/" title="《芯片手册如何读与用》">《芯片手册如何读与用》</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Software/" title="分类于 软件">软件</a> <i class="ic i-angle-right"></i> <a href="/categories/Software/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/" title="分类于 数据结构和算法">数据结构和算法</a> <i class="ic i-angle-right"></i> <a href="/categories/Software/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/%E6%A0%91/" title="分类于 树">树</a></div><span><a href="/posts/eea60a6a/" title="字典树">字典树</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/work/" title="分类于 工作">工作</a> <i class="ic i-angle-right"></i> <a href="/categories/work/efficiency/" title="分类于 工作效率">工作效率</a></div><span><a href="/posts/37138/" title="代码工程规范">代码工程规范</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Software/" title="分类于 软件">软件</a> <i class="ic i-angle-right"></i> <a href="/categories/Software/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/" title="分类于 数据结构和算法">数据结构和算法</a> <i class="ic i-angle-right"></i> <a href="/categories/Software/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/%E6%A0%91/" title="分类于 树">树</a></div><span><a href="/posts/17426722/" title="B+树">B+树</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Tool/" title="分类于 工具">工具</a> <i class="ic i-angle-right"></i> <a href="/categories/Tool/Linux/" title="分类于 Linux">Linux</a></div><span><a href="/posts/41049874/" title="一篇文章让你彻底掌握 Shell">一篇文章让你彻底掌握 Shell</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Software/" title="分类于 软件">软件</a> <i class="ic i-angle-right"></i> <a href="/categories/Software/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/" title="分类于 数据结构和算法">数据结构和算法</a> <i class="ic i-angle-right"></i> <a href="/categories/Software/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/%E7%BA%BF%E6%80%A7%E8%A1%A8/" title="分类于 线性表">线性表</a></div><span><a href="/posts/8d66b5f2/" title="栈和队列">栈和队列</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Software/" title="分类于 软件">软件</a> <i class="ic i-angle-right"></i> <a href="/categories/Software/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/" title="分类于 数据结构和算法">数据结构和算法</a></div><span><a href="/posts/2e152a56/" title="跳表">跳表</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/work/" title="分类于 工作">工作</a> <i class="ic i-angle-right"></i> <a href="/categories/work/Workplace/" title="分类于 职场">职场</a></div><span><a href="/posts/5924/" title="话术">话术</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/work/" title="分类于 工作">工作</a> <i class="ic i-angle-right"></i> <a href="/categories/work/efficiency/" title="分类于 工作效率">工作效率</a></div><span><a href="/posts/890fcec5/" title="嵌入式编程技巧项目启动说明书">嵌入式编程技巧项目启动说明书</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2020 – <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">Metal-Heart @ Metalheart</span></div><div class="count"><span id="sitetime"></span> <span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">172k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">2:37</span></div><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="count"><span id="sitetime"></span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span> <span class="post-meta-divider">|</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span id="busuanzi_container_site_uv">本站访客数<span id="busuanzi_value_site_uv"></span>人次</span></div><div class="powered-by"><tr><td><a href="https://www.foreverblog.cn/" target="_blank"><img src="https://img.foreverblog.cn/logo_en_default.png" alt="" style="width:auto;height:32px" title=" 十年之约"></a></td><td><a href="https://www.foreverblog.cn/go.html" target="_blank"><img src="https://img.foreverblog.cn/wormhole_1.gif" alt="" style="width:auto;height:32px" title="穿梭虫洞-随机访问十年之约友链博客"></a></td><td><a href="https://icp.gov.moe/?keyword=20238998" target="_blank"><img src="https://icp.gov.moe/images/ico64.png" alt="" style="width:auto;height:32px" 萌icp备20238998号></a></td></tr></div></div><script language="javascript">function siteTime(){window.setTimeout("siteTime()",1e3);var e=1e3,t=60*e,o=60*t,i=24*o,a=365*i,n=new Date,r=n.getFullYear(),l=n.getMonth()+1,s=n.getDate(),M=n.getHours(),g=n.getMinutes(),m=n.getSeconds(),T=Date.UTC(2020,10,10,0,0,0),f=Date.UTC(r,l,s,M,g,m),h=f-T,u=Math.floor(h/a),d=Math.floor(h/i-365*u),D=Math.floor((h-(365*u+d)*i)/o),c=Math.floor((h-(365*u+d)*i-D*o)/t),w=Math.floor((h-(365*u+d)*i-D*o-c*t)/e);document.getElementById("sitetime").innerHTML="本站已勉强运行 "+u+" 年 "+d+" 天 "+D+" 小时 "+c+" 分钟 "+w+" 秒"}siteTime()</script></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"posts/5c24f267/",favicon:{show:"（●´3｀●）HI~HI~",hide:"(´Д｀)浏览器崩溃了！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js,npm/echarts@5.2.2/dist/echarts.min.js"></script><script src="/js/app.js?v=0.2.5"></script><script data-pjax>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?dcc6c1ac79cee4ce079664303af25296";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,log:!1,model:{jsonPath:"/live2dw/assets/z16.model.json"},display:{position:"left",width:150,height:300,hoffset:200,voffset:0},mobile:{show:!0},react:{opacity:.7},dialog:{enable:!0,hitokoto:!0}})</script></body></html>